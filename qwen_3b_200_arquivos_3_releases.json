{
  "metadata": {
    "project": "mastra-ai/mastra",
    "analysis_date": "2025-12-17T00:53:58.813696",
    "models": ["qwen_small"],
    "releases": [
      "@mastra/client-js@0.17.1",
      "@mastra/core@0.24.8",
      "@mastra/dane@0.1.25"
    ],
    "environment": "Google Colab (Free Tier)",
    "context_limit_chars": 3000
  },
  "results": {
    "@mastra/client-js@0.17.1": {
      "/content/mastra/packages/core/src/zod-to-json.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Unnecessary Export",
              "category": "Dispensables",
              "snippet": "export { zodToJsonSchema } from '@mastra/schema-compat/zod-to-json';",
              "justification": "The export is not used in the code snippet provided.",
              "impact": "Reduces the size of the bundle and improves loading times.",
              "refactoring": "Remove the unnecessary export."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "Exporting all modules using `export *`",
              "justification": "This practice can lead to bloating the module and making it harder to understand which modules are being used.",
              "impact": "Increased file size, potential for unused imports, and reduced maintainability.",
              "refactoring": "Consider exporting only the necessary modules or using named exports."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/base.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields",
              "category": "Dispensables",
              "snippet": "The `MastaBase` class does not have any fields or properties.",
              "justification": "Classes without fields are typically used for utility purposes or to extend other classes. In this case, the class is extending `MastaBaseBase` and does not add any new functionality.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the class if it is not needed."
            },
            {
              "name": "Empty Constructor",
              "category": "Dispensables",
              "snippet": "The `MastaBase` constructor does not perform any operations.",
              "justification": "Constructors that do not perform any operations can be removed to simplify the class.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the constructor if it is not needed."
            },
            {
              "name": "Static Method Without Logic",
              "category": "Dispensables",
              "snippet": "The `warn` method in the `MastaBase` class does not contain any logic.",
              "justification": "Methods that do not contain any logic can be removed to simplify the class.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the `warn` method if it is not needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "Método `__setLogger` e `__setTelemetry`",
              "justification": "Os métodos `__setLogger` e `__setTelemetry` são muito longos e contêm muitas instruções. Isso dificulta a manutenção e torna difícil identificar onde ocorrem mudanças.",
              "impact": "O aumento do tamanho dos métodos pode levar a erros de compreensão e dificultar a refatoração. Além disso, métodos longos podem tornar o código mais difícil de testar e entender.",
              "refactoring": "Dividir esses métodos em métodos menores, cada um com uma única responsabilidade."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "Método `get experimental_telemetry`",
              "justification": "O método `get experimental_telemetry` parece estar enviesado para o objeto `this.telemetry`, pois ele acessa propriedades e métodos diretamente do objeto. Isso pode indicar que a responsabilidade do objeto `this.telemetry` está sendo transferida para o objeto `MastaBase`, violando o princípio de encapsulamento.",
              "impact": "O enviesamento de características pode tornar o código menos modular e mais difícil de manter. Além disso, métodos enviesados podem dificultar a reutilização e a teste do código.",
              "refactoring": "Reorganizar o código para que o método `get experimental_telemetry` não dependa diretamente do objeto `this.telemetry`. Em vez disso, passar o objeto `this.telemetry` como um parâmetro para o método."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/constants.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/base.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields",
              "category": "Dispensables",
              "snippet": "The `MastaStorage` class does not have any fields.",
              "justification": "Classes without fields are typically dispensable and can be removed to simplify the codebase.",
              "impact": "Reduces complexity and improves maintainability by removing unnecessary code.",
              "refactoring": "Remove the `MastaStorage` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/index.warning.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/storageWithInit.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Proxy Pattern",
              "category": "Object-Orientation Abusers",
              "snippet": "proxy = new Proxy(storage, {...})",
              "justification": "The use of a Proxy object to intercept and modify access to the storage object's properties. This pattern can lead to increased complexity and potential performance overhead.",
              "impact": "Can make the code harder to understand and maintain, especially for those unfamiliar with Proxy objects. It may also introduce additional latency due to the need to wait for the `ensureInit` function to complete before executing any method calls.",
              "refactoring": "Consider using a more straightforward approach to handle asynchronous initialization without relying on a Proxy object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class with only one method",
              "category": "Dispensables",
              "snippet": "export class Derived extends Base { ... }",
              "justification": "The Derived class contains only one method, which is not necessary and can be removed.",
              "impact": "Reduces the complexity of the codebase, improves maintainability, and reduces the risk of introducing bugs.",
              "refactoring": "Remove the Derived class and move its functionality to the Base class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "LegacyEvalsStorage.getEvals",
              "justification": "The method `getEvals` is too long and complex, with multiple parameters and a promise return type. This makes it difficult to understand and maintain.",
              "impact": "It can lead to increased complexity in the codebase, making it harder to refactor and extend in the future.",
              "refactoring": "Consider breaking down the method into smaller, more focused methods that handle specific parts of the logic."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "LegacyEvalsStorage.getEvals",
              "justification": "The method `getEvals` has a long list of parameters, including optional ones like `agentName`, `type`, and pagination arguments. This can make the method difficult to read and understand.",
              "impact": "It can lead to increased complexity in the codebase, making it harder to refactor and extend in the future.",
              "refactoring": "Consider using an object or a class to encapsulate the parameters, making the method signature cleaner and easier to manage."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Multiple methods for handling different formats of messages",
              "justification": "The `getMessages` and `saveMessages` methods have multiple overloads that handle different formats ('v1' and 'v2'). This increases the complexity and maintenance overhead.",
              "impact": "Increased complexity, potential for errors, and difficulty in maintaining the codebase.",
              "refactoring": "Consider consolidating these methods into a single method with a parameter to specify the format."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `updateWorkflowResults` and `updateWorkflowState` methods are long and complex.",
              "justification": "These methods perform multiple operations related to workflow results and state updates, which can lead to increased complexity and difficulty in maintaining the code.",
              "impact": "Increased maintenance effort, potential for bugs, and reduced readability.",
              "refactoring": "Consider breaking these methods into smaller, more focused functions."
            },
            {
              "name": "Large Class",
              "category": "Object-Orientation Abusers",
              "snippet": "The `WorkflowsStorage` class is large and contains many methods.",
              "justification": "Having a large class can make it difficult to understand and maintain, as well as increase the risk of introducing bugs due to increased complexity.",
              "impact": "Reduced maintainability, increased testing complexity, and potential for performance issues.",
              "refactoring": "Consider refactoring the class into smaller, more focused classes or modules."
            },
            {
              "name": "Feature Envy",
              "category": "Change Preventers",
              "snippet": "The `updateWorkflowResults` method accesses the `runtimeContext` property, which is not directly related to its functionality.",
              "justification": "This can make it difficult to change the method's behavior without affecting unrelated parts of the code, leading to increased coupling and decreased flexibility.",
              "impact": "Increased coupling between classes, reduced maintainability, and potential for bugs.",
              "refactoring": "Consider extracting the `runtimeContext` access into a separate method or class."
            },
            {
              "name": "Data Clumps",
              "category": "Couplers",
              "snippet": "The `updateWorkflowResults` and `updateWorkflowState` methods both take similar parameters, such as `workflowName`, `runId`, and `stepId`, but they perform different operations.",
              "justification": "This can lead to increased coupling between the methods, making it difficult to change one without affecting the other, and potentially reducing the reusability of the code.",
              "impact": "Increased coupling between classes, reduced maintainability, and potential for bugs.",
              "refactoring": "Consider extracting common logic into a separate method or class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "getScoresBySpan method",
              "justification": "The method is too long and complex, making it difficult to understand and maintain.",
              "impact": "It can lead to increased complexity, reduced readability, and potential bugs if not refactored.",
              "refactoring": "Consider breaking down the method into smaller, more manageable functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/base.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The class `OpenAPIToolset` has many methods and properties that are not used or are redundant.",
              "justification": "The class contains methods like `getApiClient`, `toolSchemas`, `toolDocumentations`, and `baseClient` which are not used or are redundant. These methods can be removed to reduce the size and complexity of the class.",
              "impact": "This can lead to increased maintenance costs, reduced performance, and decreased readability.",
              "refactoring": "Remove the unused methods and properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields or Methods",
              "category": "Dispensables",
              "snippet": "The `OpenAPIToolset` class does not have any fields or methods.",
              "justification": "This class is an abstract base class that does not provide any functionality. It only serves as a placeholder for other classes to extend.",
              "impact": "Reduces the complexity of the codebase and can be removed without affecting the overall functionality.",
              "refactoring": "Remove the class and replace it with an interface or abstract class if necessary."
            },
            {
              "name": "Inconsistent Naming",
              "category": "Object-Orientation Abusers",
              "snippet": "The class name `OpenAPIToolset` is inconsistent with the file name `openapi-toolset.js`.",
              "justification": "Consistent naming conventions help improve readability and maintainability. This inconsistency could lead to confusion and errors.",
              "impact": "Improves code readability and reduces potential for errors.",
              "refactoring": "Rename the class to match the file name."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/integration/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/integration/integration.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields or Methods",
              "category": "Dispensables",
              "snippet": "The `Integration` class does not have any fields or methods.",
              "justification": "The class is empty and does not perform any specific functionality.",
              "impact": "Reduces the complexity of the codebase and can be removed without affecting the overall functionality.",
              "refactoring": "Remove the `Integration` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './integration.warning';\nexport * from './openapi-toolset.warning';\nexport * from './swagger-ui.warning';\nexport * from './swagger-ui-standalone.warning';\nexport * from './swagger-ui-standalone-pro.warning';\nexport * from './swagger-ui-standalone-pro-v3.warning';\nexport * from './swagger-ui-standalone-pro-v4.warning';",
              "justification": "Esta prática exporta todos os módulos de uma pasta, tornando o código mais difícil de entender e manter. Em vez disso, é recomendável exportar apenas os módulos que são realmente necessários.",
              "impact": "Aumenta a complexidade do código, tornando-o mais difícil de manter e testar. Também pode aumentar o tempo de compilação e o tamanho do bundle final.",
              "refactoring": "Organizar as exportações de forma mais específica, exportando apenas os módulos que são realmente utilizados."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/integration.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/tts/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `traced` method is defined but not used anywhere in the class.",
              "justification": "The `traced` method is defined but not utilized, which can lead to unused code and potential maintenance issues.",
              "impact": "Reduces code readability and maintainability by introducing unnecessary functionality.",
              "refactoring": "Remove the `traced` method or use it within the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/tts/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The class `MastaTTS` extends `BaseMastraTTS` but does not override any methods.",
              "justification": "Extending a base class without overriding methods is considered an object-orientation abuser because it does not provide any additional functionality or behavior.",
              "impact": "This can lead to confusion and potential bugs if the base class is modified in the future.",
              "refactoring": "Consider adding at least one method to `MastaTTS` that overrides a method from `BaseMastraTTS`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `logger.warn` statement is used to log a warning message, but it is not used anywhere else in the code.",
              "justification": "Logging warnings that are not used anywhere else is considered dispensable because they do not contribute to the functionality of the code.",
              "impact": "This can lead to clutter and unnecessary logging, which can make the code harder to read and maintain.",
              "refactoring": "Remove the `logger.warn` statement if it is not needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/multi-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `MultiLogger` class has many methods that delegate to its `loggers` array.",
              "justification": "Each method in `MultiLogger` is essentially a loop over the `loggers` array and calls the corresponding method on each logger. This can lead to code duplication and make it harder to maintain.",
              "impact": "Increased complexity, potential for bugs if not properly tested, and reduced readability.",
              "refactoring": "Consider creating a utility function or using a library like `lodash`'s `_.forEach` to handle the iteration."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `getLogs` and `getLogsByRunId` methods are similar in structure and functionality.",
              "justification": "Both methods iterate over the `loggers` array and call the same method on each logger. They also have similar parameters and logic, which suggests they could be combined into a single method.",
              "impact": "Reduces code duplication, simplifies maintenance, and improves readability.",
              "refactoring": "Combine the `getLogs` and `getLogsByRunId` methods into a single method that takes a common set of parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/default-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `ConsoleLogger` class has many methods that are not used or are redundant.",
              "justification": "The `ConsoleLogger` class has methods like `debug`, `info`, `warn`, and `error` that are not used in the implementation. Additionally, the `getLogs` and `getLogsByRunId` methods are also not used.",
              "impact": "This can lead to unnecessary code and make the class harder to maintain.",
              "refactoring": "Remove the unused methods and refactor the class to only include the necessary methods."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/constants.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Constants and Types definitions",
              "justification": "The constants and types are defined in a single place, which can lead to bloating if the number of constants or types grows significantly.",
              "impact": "Increased complexity and potential for errors if the number of constants or types increases.",
              "refactoring": "Consider breaking down the constants and types into smaller, more manageable groups."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "MastraLogger#trackException",
              "justification": "The method is too long and complex, making it difficult to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Split the method into smaller, more manageable functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "MastraLogger#getLogs",
              "justification": "The method takes a large number of parameters, which can make it difficult to read and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Refactor the method to use named parameters or a separate object for parameters."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "MastraLogger#getLogsByRunId",
              "justification": "The method takes a large number of parameters, which can make it difficult to read and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Refactor the method to use named parameters or a separate object for parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/noop-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Dispensable",
              "category": "Dispensables",
              "snippet": "noopLogger",
              "justification": "O objeto `noopLogger` não realiza nenhuma operação útil e pode ser removido sem impactar a funcionalidade do sistema.",
              "impact": "Redução da complexidade do código, melhorias na legibilidade e manutenibilidade.",
              "refactoring": "Remover o objeto `noopLogger`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/transport.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Multiple methods with similar logic in the same class",
              "justification": "The `LoggerTransport` class has two methods (`getLogs` and `getLogsByRunId`) that perform similar operations but with different parameters. This duplication increases the complexity and maintenance overhead.",
              "impact": "Increased code size, potential for errors due to duplicated logic, and difficulty in maintaining and testing the code.",
              "refactoring": "Combine the two methods into a single method that accepts a parameter specifying whether to filter by run ID."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Static method `createCustomTransport` that does not add value to the class",
              "justification": "The `createCustomTransport` method is static and does not modify the behavior of the `LoggerTransport` class. It simply returns a modified version of the input stream. This method does not provide any additional functionality and can be removed without affecting the class's behavior.",
              "impact": "Reduces the class's complexity and makes it easier to understand and maintain.",
              "refactoring": "Remove the `createCustomTransport` method."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/eval/types.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `EvaluationResult` interface extends `MetricResult` and includes an `output` property.",
              "justification": "Methods should be kept short to improve readability and maintainability. The `EvaluationResult` interface is extending `MetricResult`, which could lead to a long method if the `output` property is used extensively.",
              "impact": "This can make the code harder to understand and maintain, as it may require more time to read and comprehend the method's purpose.",
              "refactoring": "Consider breaking down the `EvaluationResult` interface into smaller, more focused interfaces or methods."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `EvaluationResult` interface includes an `output` property, which might indicate that the `output` logic is being moved towards the `EvaluationResult` class.",
              "justification": "Feature Envy occurs when a method or attribute in one class references data or methods of another class, indicating that the first class might not belong there. In this case, the `output` logic might be better suited to a separate class or utility function.",
              "impact": "This can lead to a class with too many responsibilities, making it harder to maintain and test.",
              "refactoring": "Consider extracting the `output` logic into a separate class or utility function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/evaluation.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `evaluate` function is too long and contains multiple responsibilities.",
              "justification": "The function performs several tasks including measuring a metric, executing hooks, and returning the result. This violates the Single Responsibility Principle.",
              "impact": "Increased complexity, harder to maintain, and potential for bugs if not properly tested.",
              "refactoring": "Split the function into smaller, more focused functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/metric.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "MetricResult interface and Metric abstract class",
              "justification": "Both the MetricResult interface and the Metric abstract class are large and contain many properties. This can lead to bloated code and make it difficult to maintain.",
              "impact": "The large size of these classes can increase the complexity of the codebase, making it harder to understand and modify. It also increases the risk of introducing bugs due to the large number of properties.",
              "refactoring": "Consider breaking down the MetricResult interface into smaller interfaces or using a more modular design."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "Metric abstract class",
              "justification": "The Metric abstract class is not properly encapsulated. It exposes too many details about its implementation, which can lead to tight coupling between the Metric class and its subclasses.",
              "impact": "This can make it difficult to change the implementation of the Metric class without affecting its subclasses. It also makes it harder to test the Metric class in isolation.",
              "refactoring": "Consider using an interface or abstract class to define the contract for the Metric class, and then implement the contract in the subclasses."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/agent.types.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Deprecated Property",
              "category": "Change Preventers",
              "snippet": "Deprecated properties: `resourceId`, `threadId`",
              "justification": "The use of deprecated properties can lead to confusion and potential bugs when updating the code in the future.",
              "impact": "Confusion and potential bugs when updating the code in the future.",
              "refactoring": "Replace deprecated properties with the new properties and update the code to use the new properties."
            },
            {
              "name": "Deprecated Property",
              "category": "Change Preventers",
              "snippet": "Deprecated property: `format`",
              "justification": "The use of deprecated properties can lead to confusion and potential bugs when updating the code in the future.",
              "impact": "Confusion and potential bugs when updating the code in the future.",
              "refactoring": "Replace deprecated property with the new properties and update the code to use the new properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/agent.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './input-processor';\nexport { TripWire } from './trip-wire';\nexport { MessageList, convertMessages } from './message-list';\nexport type { OutputFormat } from './message-list';\nexport * from './types';\nexport * from './agent';\nexport * from './utils';\n\nexport type {\n  AgentExecutionOptions,\n  InnerAgentExecutionOptions,\n  MultiPrimitiveExecutionOptions,\n  DeprecatedOutputOptions,\n} from './agent.types';\n\nexport type { MastraLanguageModel } from '../llm/model/shared.types';",
              "justification": "Exporting all modules using `export *` can lead to unnecessary complexity and make it harder to understand the module structure. It also increases the risk of name collisions if multiple modules export the same names.",
              "impact": "Reduces maintainability by making it harder to track dependencies and manage changes. Increases the risk of bugs due to name collisions.",
              "refactoring": "Consider organizing the exports into logical groups or using named exports where appropriate."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `tryGenerateWithJsonFallback` and `tryStreamWithJsonFallback` have a similar structure with only minor differences.",
              "justification": "Both functions perform the same task but with different types and parameters. This repetition can lead to code duplication and make it harder to maintain.",
              "impact": "Increased complexity, potential for errors due to duplicated logic, and difficulty in updating or extending the functionality.",
              "refactoring": "Extract a common function that handles the core logic and then call it from both `tryGenerateWithJsonFallback` and `tryStreamWithJsonFallback`. Use function overloading or generics to handle different types and parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Deprecated Class",
              "category": "Dispensables",
              "snippet": "export class Agent",
              "justification": "The class is marked as deprecated and should be replaced with the recommended import path.",
              "impact": "Reduces maintainability by encouraging the use of the correct import path.",
              "refactoring": "Replace the import path with '@mastra/core/agent'."
            },
            {
              "name": "Class Without Constructor",
              "category": "Bloaters",
              "snippet": "export class Agent",
              "justification": "The class does not have a constructor, which can lead to unexpected behavior if the class is extended or used in other contexts.",
              "impact": "Increases complexity and potential for bugs.",
              "refactoring": "Add a constructor to the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/test-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `getMessages` method is excessively long and complex.",
              "justification": "The method handles multiple conditions and formats, making it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the `getMessages` method into smaller, more focused functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `getMessages` method has a long list of parameters.",
              "justification": "Having many parameters can make the method harder to understand and use, leading to errors and decreased maintainability.",
              "impact": "Reduced readability, increased cognitive load, and potential for bugs due to the large number of parameters.",
              "refactoring": "Consider using an object or interface to group related parameters."
            },
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `saveMessages` method is excessively long and complex.",
              "justification": "The method handles multiple conditions and formats, making it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the `saveMessages` method into smaller, more focused functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `saveMessages` method has a long list of parameters.",
              "justification": "Having many parameters can make the method harder to understand and use, leading to errors and decreased maintainability.",
              "impact": "Reduced readability, increased cognitive load, and potential for bugs due to the large number of parameters.",
              "refactoring": "Consider using an object or interface to group related parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/trip-wire.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/save-queue/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/convert-messages.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `to` method in the `MessageConverter` class is excessively long and performs multiple conversions.",
              "justification": "The method contains multiple conditional branches that handle different output formats, making it difficult to maintain and extend.",
              "impact": "This can lead to increased complexity, reduced readability, and potential bugs if changes are made to the method.",
              "refactoring": "Consider breaking down the `to` method into smaller, more focused methods for each output format."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `convertMessages` function uses the `MessageConverter` class to perform its conversion logic.",
              "justification": "This violates the Single Responsibility Principle, as the `convertMessages` function is now responsible for both input handling and output conversion, which should be separated.",
              "impact": "This can make the code harder to understand and maintain, as changes to one part of the code may affect the other.",
              "refactoring": "Extract the conversion logic into a separate method within the `MessageConverter` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v4-v5/ui-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v4-v5/core-model-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v5/tool.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "function getToolName(type: string | { type: string }): string",
              "justification": "The function `getToolName` is excessively long, containing multiple conditional checks and string manipulations. This makes it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of lines and nested conditions.",
              "refactoring": "Consider breaking down the function into smaller, more focused methods or using helper functions to improve code organization."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "function getToolName(type: string | { type: string }): string",
              "justification": "The function `getToolName` is accessing properties of an object (`type`) that is not directly related to its primary responsibility (extracting a tool name). This violates the Single Responsibility Principle.",
              "impact": "Reduced cohesion between the function and the object, making it harder to understand and maintain.",
              "refactoring": "Extract the logic related to handling objects with a `type` property into a separate method or function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v5/gemini-compatibility.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/download-assets.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/image-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `createDataUri` function includes unnecessary logic for handling binary data.",
              "justification": "The function converts binary data to base64 and then checks if it starts with 'data:', which is redundant since the conversion already results in a data URI. This adds complexity without providing any additional value.",
              "impact": "Reduces readability and maintainability by introducing unnecessary code.",
              "refactoring": "Remove the check for 'data:' in the `createDataUri` function."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `parseDataUri` function does not handle cases where the MIME type is missing or invalid.",
              "justification": "The function assumes that the MIME type is always present and valid, which may not be the case in all scenarios. This makes the function less robust and error-prone.",
              "impact": "Increases the risk of errors and reduces the reliability of the function.",
              "refactoring": "Add error handling for cases where the MIME type is missing or invalid."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/invalid-content-error.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/data-content.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `convertDataContentToBase64String` function has a large number of conditional checks and conversions.",
              "justification": "The function performs multiple operations (conversion to Uint8Array, conversion to base64) based on the type of input, which can lead to bloated code.",
              "impact": "This can make the function harder to read and maintain, as well as potentially increase execution time due to repeated conversions.",
              "refactoring": "Consider creating separate helper functions for each conversion step to improve readability and maintainability."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/convert-file.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/attachments-to-parts.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/convert-to-mastra-v1.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/__tests__/mock-model.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/schema.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/stream-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/prepare-memory-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/prepare-tools-step.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `createPrepareToolsStep` is quite large and contains multiple complex operations.",
              "justification": "The function performs several tasks such as logging, converting tools, and returning results. This makes it difficult to understand and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The variable `toolEnhancements` is not used anywhere in the function.",
              "justification": "The variable is initialized but never referenced or modified, making it unnecessary.",
              "impact": "Reduces code size and improves performance.",
              "refactoring": "Remove the unused variable `toolEnhancements`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/map-results-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/pii-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The class PIIDetectorInputProcessor is implementing an old InputProcessor interface and is deprecated.",
              "justification": "The class is not used anymore and can be removed to reduce the codebase size.",
              "impact": "Reduces the codebase size, improves maintainability, and reduces the risk of errors.",
              "refactoring": "Remove the class PIIDetectorInputProcessor and use PIIDetector directly."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The type definitions for PIIDetectorOptions, PIIDetectionResult, PIICategories, PIICategoryScores, and PIIDetection are exported but not used anywhere in the code.",
              "justification": "These types are not used and can be removed to reduce the codebase size.",
              "impact": "Reduces the codebase size, improves maintainability, and reduces the risk of errors.",
              "refactoring": "Remove the type definitions for PIIDetectorOptions, PIIDetectionResult, PIICategories, PIICategoryScores, and PIIDetection."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/prompt-injection-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `PromptInjectionDetectorInputProcessor` extends `InputProcessor` and includes a private property `processor` of type `PromptInjectionDetector`. This property is initialized in the constructor with an instance of `PromptInjectionDetector`.",
              "justification": "The class has a private property that holds an instance of another class, which can lead to increased complexity and potential for bugs if not managed properly.",
              "impact": "This can make the class harder to understand and maintain, as it introduces a dependency on another class. It also increases the memory footprint of the class.",
              "refactoring": "Consider extracting the `PromptInjectionDetector` logic into a separate class or module to reduce coupling and improve modularity."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `PromptInjectionDetectorInputProcessor` class does not implement any methods that are specific to the `InputProcessor` interface. Instead, it simply forwards the `process` method to the `processor` instance.",
              "justification": "The class does not add any new functionality or behavior that is not already present in the `PromptInjectionDetector` class. It only serves as a wrapper and does not provide any additional value.",
              "impact": "This can make the class redundant and potentially confusing, as it does not add any new features or responsibilities.",
              "refactoring": "Consider removing the `PromptInjectionDetectorInputProcessor` class and using the `PromptInjectionDetector` class directly instead."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/language-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `LanguageDetectorInputProcessor` extends `InputProcessor` and includes a private property `processor` of type `LanguageDetector`. This property is initialized in the constructor with an instance of `LanguageDetector` created with the provided `options`.",
              "justification": "The class contains unnecessary properties and methods that are not directly related to its primary functionality. The `processor` property is not used within the class, making it redundant.",
              "impact": "This can lead to increased memory usage and potential performance issues due to the unnecessary storage of the `processor` object. It also makes the class harder to understand and maintain.",
              "refactoring": "Remove the `processor` property and use the `LanguageDetector` directly within the class."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `LanguageDetectorInputProcessor` class does not implement any methods that are not required by the `InputProcessor` interface. The `process` method simply calls the `processInput` method of the `processor` object.",
              "justification": "The class does not add any value to the `InputProcessor` interface beyond what is already provided by the `LanguageDetector` class. The `process` method can be removed without affecting the functionality of the class.",
              "impact": "Removing the `process` method can simplify the class and reduce the risk of introducing bugs or errors.",
              "refactoring": "Remove the `process` method and call the `processInput` method directly on the `processor` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/moderation.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `ModerationInputProcessor` class does not implement any methods or properties that are required by the `InputProcessor` interface, making it redundant and potentially unnecessary.",
              "justification": "The class only wraps the `ModerationProcessor` and does not add any additional functionality, so it can be removed without affecting the overall functionality.",
              "impact": "This can lead to reduced code size, decreased complexity, and potential maintenance issues.",
              "refactoring": "Remove the `ModerationInputProcessor` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/unicode-normalizer.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `UnicodeNormalizerInputProcessor`",
              "justification": "The class contains a private property `processor` that is not used anywhere in the class. This property is likely a leftover from an older version of the code.",
              "impact": "This can lead to unnecessary memory usage and potential bugs if the property is accidentally modified or accessed.",
              "refactoring": "Remove the unused private property `processor`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Type alias `UnicodeNormalizerOptions`",
              "justification": "The type alias `UnicodeNormalizerOptions` is not used anywhere in the code. It is likely a leftover from an older version of the code.",
              "impact": "This can lead to unnecessary complexity and potential bugs if the type alias is accidentally modified or accessed.",
              "refactoring": "Remove the unused type alias `UnicodeNormalizerOptions`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/relevance-score-provider.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "createSimilarityPrompt function",
              "justification": "The function is overly complex with unnecessary details. It includes a prompt template that could be extracted into a separate constant or configuration object.",
              "impact": "Increases code complexity, makes it harder to maintain, and may lead to duplication if the prompt is reused elsewhere.",
              "refactoring": "Extract the prompt template into a separate constant or configuration object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/relevance/cohere/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `getRelevanceScore` method is too long and complex.",
              "justification": "The method performs multiple tasks including API request, error handling, and data parsing, which makes it difficult to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Split the method into smaller, more focused functions."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `getRelevanceScore` method accesses properties of the `CohereRelevanceScorer` instance.",
              "justification": "The method is tightly coupled with the instance's state, which violates the Single Responsibility Principle and can lead to tight coupling between classes.",
              "impact": "Reduced cohesion, increased coupling, and potential for bugs.",
              "refactoring": "Extract the logic related to API requests and error handling into a separate utility function."
            },
            {
              "name": "Data Clumps",
              "category": "Bloaters",
              "snippet": "The `CohereRerankingResponse` interface includes fields that are not used in the implementation.",
              "justification": "The interface contains fields that are not utilized in the implementation, leading to unnecessary complexity and potential for errors.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Remove unused fields from the interface."
            },
            {
              "name": "Primitive Obsession",
              "category": "Bloaters",
              "snippet": "The `CohereRerankingResponse` interface uses primitive types (`string`, `number`) instead of objects or enums.",
              "justification": "Using primitive types can lead to errors and make the code harder to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Replace primitive types with objects or enums."
            },
            {
              "name": "Inappropriate Intimacy",
              "category": "Couplers",
              "snippet": "The `CohereRelevanceScorer` class has a dependency on the `RelevanceScoreProvider` interface.",
              "justification": "The class is tightly coupled with an interface that it does not need to implement, which can lead to unnecessary dependencies and potential for bugs.",
              "impact": "Increased complexity, potential for bugs, and reduced flexibility.",
              "refactoring": "Remove the dependency on the `RelevanceScoreProvider` interface."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/mastra-agent/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `getRelevanceScore` method is too long and complex.",
              "justification": "The method contains multiple steps that could be separated into smaller methods for better readability and maintainability.",
              "impact": "Increased complexity, potential for bugs, and reduced testability.",
              "refactoring": "Split the `getRelevanceScore` method into smaller, more focused methods."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `getRelevanceScore` method accesses the `agent`'s properties directly.",
              "justification": "The method should be encapsulated within the `MastraAgentRelevanceScorer` class to improve encapsulation and reduce coupling.",
              "impact": "Reduced cohesion, potential for tight coupling, and increased difficulty in testing.",
              "refactoring": "Move the `agent` property and its methods into the `MastraAgentRelevanceScorer` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/test-utils/llm-mock.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `createMockModel` has a large number of parameters and uses multiple imports.",
              "justification": "The function takes many parameters, which can lead to long parameter lists and make the function harder to read. Additionally, it uses multiple imports, which can increase the size of the module and make it harder to maintain.",
              "impact": "This can make the function harder to understand and maintain, as well as increase the risk of errors due to incorrect parameter values or missing imports.",
              "refactoring": "Consider breaking down the function into smaller functions or using a configuration object to pass in all the necessary parameters."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The variable `finalText` is assigned the value of `text` if `objectGenerationMode` is not 'json'. This variable is not used anywhere else in the function.",
              "justification": "The variable `finalText` is only used once in the function, and its value is determined by the `objectGenerationMode` parameter. Since it is not used elsewhere, it can be removed to simplify the function.",
              "impact": "This can make the function easier to understand and maintain, as well as reduce the risk of errors due to unused variables.",
              "refactoring": "Remove the variable `finalText` and directly use the value of `text` in the function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/loop.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/mockTracer.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `MockSpan` class has a long method `addEvent` that handles multiple cases for adding events to the span.",
              "justification": "The method is too complex and long, making it difficult to read and maintain. It also violates the Single Responsibility Principle.",
              "impact": "This can lead to increased complexity in the codebase, making it harder to understand and modify over time.",
              "refactoring": "Consider breaking down the `addEvent` method into smaller, more focused methods."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `startActiveSpan` method has a long parameter list with multiple optional parameters.",
              "justification": "Having many parameters in a single method call can make the method signature complex and hard to read. It also makes the method harder to use and understand.",
              "impact": "This can lead to increased complexity in the codebase, making it harder to understand and modify over time.",
              "refactoring": "Consider breaking down the `startActiveSpan` method into smaller, more focused methods or using default values for optional parameters."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `MockSpan` class has methods that are not related to its primary responsibility of representing a span.",
              "justification": "Methods like `addLink`, `addLinks`, `setStatus`, `updateName`, `end`, `isRecording`, and `recordException` are not directly related to the `MockSpan` class's primary responsibility of representing a span. They are more related to the `Span` interface.",
              "impact": "This can lead to increased coupling between classes and make the codebase harder to understand and maintain.",
              "refactoring": "Consider extracting these methods into separate classes or interfaces that are more closely related to their responsibilities."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/generateText.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/streamObject.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/tools.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/textStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/toUIMessageStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/mock-server-response.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/fullStream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The code contains unnecessary imports and unused variables.",
              "justification": "Imports like `@ai-sdk/provider-utils-v5`, `convertAsyncIterableToArray`, `tool`, `convertArrayToReadableStream`, `mockValues`, `mockId`, `describe`, `expect`, `it`, `vi`, `z`, `MessageList`, `loop`, `createMessageListWithUserMessage`, `createTestModels`, `defaultSettings`, `mockDate`, `modelWithFiles`, `modelWithReasoning`, `modelWithSources`, `testUsage`, `testUsage2`, `fullStreamTests`, `MastraLanguageModelV2Mock` are not used anywhere in the code. These imports and variables add unnecessary bloat to the codebase.",
              "impact": "Increased code size, potential for bugs due to unused imports, and decreased readability.",
              "refactoring": "Remove unused imports and variables."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/options.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/resultObject.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/MastraLanguageModelV2Mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/telemetry.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/schema.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/stream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/run-state.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/tool-call-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/llm-mapping-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/llm-execution-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-loop/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/telemetry/noop.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "noopSpanContext and noopSpan are simple objects with minimal functionality.",
              "justification": "These objects are used to simulate the behavior of real spans and contexts, but they lack any meaningful methods or properties. This can lead to confusion and potential misuse in larger systems.",
              "impact": "The use of these simple objects can make the code harder to understand and maintain, as it may not be immediately clear what their purpose is or how they interact with other parts of the system.",
              "refactoring": "Consider creating more complex classes or interfaces for span and context objects, with meaningful methods and properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/telemetry/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/network/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/MastraAgentNetworkStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/RunOutput.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/MastraWorkflowStream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `#usageCount` object is used to track token usage, which can grow large over time and lead to performance issues.",
              "justification": "Tracking token usage in a large object can consume memory and processing power, especially if the workflow runs for extended periods.",
              "impact": "High memory usage and potential performance degradation due to the accumulation of token usage data.",
              "refactoring": "Consider using a more efficient data structure or a separate class to manage token usage."
            },
            {
              "name": "Change Preventers",
              "category": "Change Preventers",
              "snippet": "The `#streamPromise` object is used to manage the lifecycle of the stream, but it is not used to handle errors or exceptions that may occur during the stream creation or reading process.",
              "justification": "The `#streamPromise` object is not designed to handle errors or exceptions, which can lead to unexpected behavior or crashes if an error occurs.",
              "impact": "Potential loss of data or application instability due to unhandled errors or exceptions.",
              "refactoring": "Consider adding error handling and exception management to the `#streamPromise` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/file.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Lazy Evaluation",
              "category": "Change Preventers",
              "snippet": "The `base64` and `uint8Array` properties are implemented using lazy evaluation.",
              "justification": "Lazy evaluation can lead to performance issues if not properly managed, especially in scenarios where these properties are accessed frequently.",
              "impact": "Increased memory usage due to caching, potential performance degradation if accessed multiple times without proper management.",
              "refactoring": "Consider using a getter with a boolean flag to control whether the conversion should be performed."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The `DefaultGeneratedFile` class uses inheritance to extend functionality, but it does not add any new behavior or properties.",
              "justification": "Inheritance should be used judiciously to avoid creating overly complex classes that do not add value.",
              "impact": "Increased complexity and potential for confusion, as the class does not provide any additional functionality beyond what is already available in the base class.",
              "refactoring": "Consider using composition instead of inheritance to achieve the same functionality."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/output.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/output-helpers.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Constructor with many parameters",
              "justification": "The constructor takes multiple parameters, which can lead to long and complex constructors. This can make the class harder to read and maintain.",
              "impact": "Increased complexity, reduced readability, potential for errors due to incorrect parameter values.",
              "refactoring": "Consider using a builder pattern or a factory method to create instances of the class."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Unused properties in the class",
              "justification": "The `request`, `response`, and `providerMetadata` properties are not used anywhere in the class. These properties can be removed to simplify the class.",
              "impact": "Reduced complexity, improved readability, potential for bugs if these properties are accidentally used.",
              "refactoring": "Remove unused properties from the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/execute.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `ReadableStream` is being used without proper error handling and the `@ts-ignore` comment is present.",
              "justification": "Using `ReadableStream` without proper error handling can lead to runtime errors. The `@ts-ignore` comment is a workaround for TypeScript's strict type checking, which can be risky in production environments.",
              "impact": "This can make the code less robust and harder to maintain.",
              "refactoring": "Consider adding try-catch blocks around the `for await` loop to handle potential errors gracefully."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `controller.enqueue(transformedChunk);` line is redundant if `transformedChunk` is always truthy.",
              "justification": "If `transformedChunk` is always truthy, the `enqueue` method will always be called, which can be considered redundant.",
              "impact": "This can make the code less readable and potentially unnecessary.",
              "refactoring": "Remove the redundant `enqueue` call if `transformedChunk` is always truthy."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/transform.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `convertFullStreamChunkToMastra` function is excessively long and performs multiple tasks.",
              "justification": "The function handles various types of stream parts and constructs different chunk types based on the input. This makes it difficult to maintain and understand.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the function into smaller, more focused methods that handle each type of stream part separately."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/test-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `createTestModel` function has a large number of parameters and uses a lot of imports.",
              "justification": "The function takes multiple parameters and uses several external libraries, which can lead to bloated code and make it harder to maintain.",
              "impact": "Increased complexity, potential for errors, and reduced readability.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions or using a builder pattern to reduce the number of parameters."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `testUsage` object is not used anywhere in the code.",
              "justification": "The object contains only static values that are not referenced or modified within the function. It can be removed without affecting the functionality.",
              "impact": "Reduces code size and complexity, making the code easier to understand and maintain.",
              "refactoring": "Remove the `testUsage` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/prepare-tools.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/ui-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/media.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `stripID3` function is used in multiple places and has a similar implementation.",
              "justification": "The function is duplicated across different parts of the codebase, which increases complexity and maintenance overhead.",
              "impact": "The duplication can lead to inconsistencies and errors if the implementation changes in one place but not the others.",
              "refactoring": "Extract the `stripID3` function into a separate module or utility file."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/consume-stream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/delayed-promise.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Lazy Initialization",
              "category": "Dispensables",
              "snippet": "The `DelayedPromise` class uses lazy initialization for its `_promise` property.",
              "justification": "Lazy initialization can lead to unnecessary object creation and can be replaced with a simple getter that returns a promise.",
              "impact": "Reduces memory usage and improves performance by avoiding unnecessary object creation.",
              "refactoring": "Replace the lazy initialization with a simple getter that returns a promise."
            },
            {
              "name": "Unnecessary Property",
              "category": "Dispensables",
              "snippet": "The `DelayedPromise` class has an unnecessary property `status` that is not used anywhere in the class.",
              "justification": "The `status` property can be removed as it does not contribute to the functionality of the class.",
              "impact": "Reduces memory usage and improves performance by removing unnecessary properties.",
              "refactoring": "Remove the `status` property."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/validation.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/content.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './content';\nexport * from './media';\nexport * from './ui-message';\nexport * from './validation';\nexport * from './delayed-promise';\nexport * from './prepare-tools';\nexport * from './consume-stream';\nexport * from './utils';",
              "justification": "Exporting all modules at once can lead to unnecessary complexity and make it harder to manage dependencies. It also reduces the ability to selectively import only what is needed.",
              "impact": "Increased complexity, reduced maintainability, and potential for performance issues due to unnecessary imports.",
              "refactoring": "Consider using named exports or importing specific modules as needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v4/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `for await` loop is used to iterate over the `stream`, which can lead to performance issues if the stream is large.",
              "justification": "The `for await` loop is synchronous and can block the event loop, leading to performance degradation when dealing with large streams.",
              "impact": "High impact on performance, especially in scenarios where the stream is large or the application is under heavy load.",
              "refactoring": "Consider using an asynchronous iterator or a generator to handle the stream more efficiently."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `controller.enqueue(transformedChunk);` line is redundant if `transformedChunk` is `null` or `undefined`.",
              "justification": "If `transformedChunk` is not valid, it should be skipped or handled appropriately without enqueuing it.",
              "impact": "Low impact on functionality but can lead to unnecessary processing and potential bugs.",
              "refactoring": "Add a check to ensure `transformedChunk` is valid before enqueuing it."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v4/transform.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Switch Statement",
              "category": "Change Preventers",
              "snippet": "The function uses a switch statement to handle different types of input values.",
              "justification": "Switch statements can lead to tight coupling and make it difficult to add new cases without modifying the existing code. This can prevent changes from being made in the future.",
              "impact": "Increased complexity, difficulty in adding new features, and potential for bugs if not properly managed.",
              "refactoring": "Consider using a map or object to handle different types of input values, which can make it easier to add new cases and improve maintainability."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/schema.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The code contains multiple imports for different versions of the same library ('zod/v3' and 'zod/v4').",
              "justification": "Multiple imports for the same library can lead to confusion and potential issues with version compatibility.",
              "impact": "Increased complexity, potential for errors due to version mismatches, and reduced maintainability.",
              "refactoring": "Combine the imports into a single import statement for the latest version of 'zod'."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `asJsonSchema` function returns `undefined` when the input `schema` is `undefined`. This can be simplified by returning `undefined` directly without checking the condition.",
              "justification": "Returning `undefined` directly simplifies the function and avoids unnecessary checks.",
              "impact": "Reduced complexity and improved readability.",
              "refactoring": "Remove the condition and return `undefined` directly."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `getTransformedSchema` function returns `undefined` when the input `schema` is `undefined`. This can be simplified by returning `undefined` directly without checking the condition.",
              "justification": "Returning `undefined` directly simplifies the function and avoids unnecessary checks.",
              "impact": "Reduced complexity and improved readability.",
              "refactoring": "Remove the condition and return `undefined` directly."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/output.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/base/consume-stream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "O método `consumeStream` tem uma lógica simples que pode ser simplificada.",
              "justification": "O método não faz uso de nenhuma estrutura de dados complexa ou de funções auxiliares. A lógica pode ser reduzida para apenas ler o stream até que ele termine.",
              "impact": "Reduzirá a complexidade do código, melhorando a legibilidade e a manutenibilidade.",
              "refactoring": "Remover a lógica de leitura do stream dentro do método `consumeStream`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "O método `consumeStream` não usa a variável `onError`.",
              "justification": "A variável `onError` não é utilizada dentro do método, tornando-a dispensável.",
              "impact": "Removerá a variável desnecessária, melhorando a performance e a legibilidade do código.",
              "refactoring": "Remover a variável `onError` do método `consumeStream`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `initialize` method creates a new `ReadableStream` and starts it asynchronously.",
              "justification": "Creating a new `ReadableStream` and starting it asynchronously can lead to bloated code as it introduces unnecessary complexity and potential for errors.",
              "impact": "This can make the code harder to understand and maintain, as well as potentially increase the risk of bugs due to asynchronous operations.",
              "refactoring": "Consider using a more synchronous approach or refactoring the code to avoid creating a new `ReadableStream` and starting it asynchronously."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/stream/base/output-format-handlers.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/base/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `consumeStream` method in the `MastaBaseStream` interface is too long and complex.",
              "justification": "Methods should be kept short and focused to improve readability and maintainability. The `consumeStream` method contains multiple parameters and logic that could be extracted into smaller methods or functions.",
              "impact": "This can lead to increased complexity, reduced readability, and potential bugs if not properly managed.",
              "refactoring": "Extract the logic related to handling options into separate methods or functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/server/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/auth.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/composite-auth.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `CompositeAuth` class has multiple methods that delegate authentication and authorization to its providers.",
              "justification": "This design pattern can lead to bloated code as it spreads the logic across multiple methods. Each method is responsible for calling a provider's method, which can make the code harder to understand and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for errors if any provider fails to authenticate or authorize.",
              "refactoring": "Consider using a single method that iterates over the providers and returns the result of the first successful authentication or authorization."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The `CompositeAuth` class does not encapsulate its behavior well. It relies on the providers to handle authentication and authorization, which can lead to tight coupling between the composite and its providers.",
              "justification": "This design pattern can lead to tight coupling, making it difficult to change or extend the behavior of the composite without affecting its providers. Encapsulation would help in managing the behavior more effectively.",
              "impact": "Reduced flexibility, difficulty in testing, and potential for bugs if the providers' behavior changes.",
              "refactoring": "Consider creating an interface for the providers and having the composite implement this interface. This would allow for better decoupling and easier testing."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/server/simple-auth.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `validateOptions` has a large number of conditional checks.",
              "justification": "The function contains multiple checks for required properties and error handling, which can lead to bloated code.",
              "impact": "This can make the function harder to read and maintain, as well as increase the risk of errors due to complex logic.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions that handle each specific validation step."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/di/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Redundant Import",
              "category": "Object-Orientation Abusers",
              "snippet": "import { RuntimeContext as RuntimeContextType } from '../runtime-context';",
              "justification": "O import redundante está importando a mesma classe duas vezes com diferentes nomes. Isso pode confundir o desenvolvedor e pode levar a erros de compilação se houver conflitos entre as duas importações.",
              "impact": "Reduz a legibilidade do código e pode causar confusão para outros desenvolvedores.",
              "refactoring": "Remover uma das importações redundantes."
            }
          ]
        }
      }
    },
    "@mastra/core@0.24.8": {
      "/content/mastra/packages/core/src/zod-to-json.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Unnecessary Export",
              "category": "Dispensables",
              "snippet": "export { zodToJsonSchema } from '@mastra/schema-compat/zod-to-json';",
              "justification": "The export is not used in the code snippet provided.",
              "impact": "Reduces the size of the bundle and improves loading times.",
              "refactoring": "Remove the unnecessary export."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "Exporting all modules using `export *`",
              "justification": "This practice can lead to bloating the module and making it harder to understand which modules are being used.",
              "impact": "Increased file size, potential for unused imports, and reduced maintainability.",
              "refactoring": "Consider exporting only the necessary modules or using named exports."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/base.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields",
              "category": "Dispensables",
              "snippet": "The `MastaBase` class does not have any fields or properties.",
              "justification": "Classes without fields are typically used for utility purposes or to extend other classes. In this case, the class is extending `MastaBaseBase` and does not add any new functionality.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the class if it is not needed."
            },
            {
              "name": "Empty Constructor",
              "category": "Dispensables",
              "snippet": "The `MastaBase` constructor does not perform any operations.",
              "justification": "Constructors that do not perform any operations can be removed to simplify the class.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the constructor if it is not needed."
            },
            {
              "name": "Static Method Without Logic",
              "category": "Dispensables",
              "snippet": "The `warn` method in the `MastaBase` class does not contain any logic.",
              "justification": "Methods that do not contain any logic can be removed to simplify the class.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the `warn` method if it is not needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "Método `__setLogger` e `__setTelemetry`",
              "justification": "Os métodos `__setLogger` e `__setTelemetry` são muito longos e contêm muitas instruções. Isso dificulta a manutenção e torna difícil identificar onde ocorrem mudanças.",
              "impact": "O aumento do tamanho dos métodos pode levar a erros de compreensão e dificultar a refatoração. Além disso, métodos longos podem tornar o código mais difícil de testar e entender.",
              "refactoring": "Dividir esses métodos em métodos menores, cada um com uma única responsabilidade."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "Método `get experimental_telemetry`",
              "justification": "O método `get experimental_telemetry` parece estar enviesado para o objeto `this.telemetry`, pois ele acessa propriedades e métodos diretamente do objeto. Isso pode indicar que a responsabilidade do objeto `this.telemetry` está sendo transferida para o objeto `MastaBase`, violando o princípio de encapsulamento.",
              "impact": "O enviesamento de características pode tornar o código menos modular e mais difícil de manter. Além disso, métodos enviesados podem dificultar a reutilização e a teste do código.",
              "refactoring": "Reorganizar o código para que o método `get experimental_telemetry` não dependa diretamente do objeto `this.telemetry`. Em vez disso, passar o objeto `this.telemetry` como um parâmetro para o método."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/constants.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/base.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields",
              "category": "Dispensables",
              "snippet": "The `MastaStorage` class does not have any fields.",
              "justification": "Classes without fields are typically dispensable and can be removed to simplify the codebase.",
              "impact": "Reduces complexity and improves maintainability by removing unnecessary code.",
              "refactoring": "Remove the `MastaStorage` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/index.warning.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/storageWithInit.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Proxy Pattern",
              "category": "Object-Orientation Abusers",
              "snippet": "proxy = new Proxy(storage, {...})",
              "justification": "The use of a Proxy object to intercept and modify access to the storage object's properties. This pattern can lead to increased complexity and potential performance overhead.",
              "impact": "Can make the code harder to understand and maintain, especially for those unfamiliar with Proxy objects. It may also introduce additional latency due to the need to wait for the `ensureInit` function to complete before executing any method calls.",
              "refactoring": "Consider using a more straightforward approach to handle asynchronous initialization without relying on a Proxy object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class with only one method",
              "category": "Dispensables",
              "snippet": "export class Derived extends Base { ... }",
              "justification": "The Derived class contains only one method, which is not necessary and can be removed.",
              "impact": "Reduces the complexity of the codebase, improves maintainability, and reduces the risk of introducing bugs.",
              "refactoring": "Remove the Derived class and move its functionality to the Base class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "LegacyEvalsStorage.getEvals",
              "justification": "The method `getEvals` is too long and complex, with multiple parameters and a promise return type. This makes it difficult to understand and maintain.",
              "impact": "It can lead to increased complexity in the codebase, making it harder to refactor and extend in the future.",
              "refactoring": "Consider breaking down the method into smaller, more focused methods that handle specific parts of the logic."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "LegacyEvalsStorage.getEvals",
              "justification": "The method `getEvals` has a long list of parameters, including optional ones like `agentName`, `type`, and pagination arguments. This can make the method difficult to read and understand.",
              "impact": "It can lead to increased complexity in the codebase, making it harder to refactor and extend in the future.",
              "refactoring": "Consider using an object or a class to encapsulate the parameters, making the method signature cleaner and easier to manage."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Multiple methods for handling different formats of messages",
              "justification": "The `getMessages` and `saveMessages` methods have multiple overloads that handle different formats ('v1' and 'v2'). This increases the complexity and maintenance overhead.",
              "impact": "Increased complexity, potential for errors, and difficulty in maintaining the codebase.",
              "refactoring": "Consider consolidating these methods into a single method with a parameter to specify the format."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `updateWorkflowResults` and `updateWorkflowState` methods are long and complex.",
              "justification": "These methods perform multiple operations related to workflow results and state updates, which can lead to increased complexity and difficulty in maintaining the code.",
              "impact": "Increased maintenance effort, potential for bugs, and reduced readability.",
              "refactoring": "Consider breaking these methods into smaller, more focused functions."
            },
            {
              "name": "Large Class",
              "category": "Object-Orientation Abusers",
              "snippet": "The `WorkflowsStorage` class is large and contains many methods.",
              "justification": "Having a large class can make it difficult to understand and maintain, as well as increase the risk of introducing bugs due to increased complexity.",
              "impact": "Reduced maintainability, increased testing complexity, and potential for performance issues.",
              "refactoring": "Consider refactoring the class into smaller, more focused classes or modules."
            },
            {
              "name": "Feature Envy",
              "category": "Change Preventers",
              "snippet": "The `updateWorkflowResults` method accesses the `runtimeContext` property, which is not directly related to its functionality.",
              "justification": "This can make it difficult to change the method's behavior without affecting unrelated parts of the code, leading to increased coupling and decreased flexibility.",
              "impact": "Increased coupling between classes, reduced maintainability, and potential for bugs.",
              "refactoring": "Consider extracting the `runtimeContext` access into a separate method or class."
            },
            {
              "name": "Data Clumps",
              "category": "Couplers",
              "snippet": "The `updateWorkflowResults` and `updateWorkflowState` methods both take similar parameters, such as `workflowName`, `runId`, and `stepId`, but they perform different operations.",
              "justification": "This can lead to increased coupling between the methods, making it difficult to change one without affecting the other, and potentially reducing the reusability of the code.",
              "impact": "Increased coupling between classes, reduced maintainability, and potential for bugs.",
              "refactoring": "Consider extracting common logic into a separate method or class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "getScoresBySpan method",
              "justification": "The method is too long and complex, making it difficult to understand and maintain.",
              "impact": "It can lead to increased complexity, reduced readability, and potential bugs if not refactored.",
              "refactoring": "Consider breaking down the method into smaller, more manageable functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/base.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The class `OpenAPIToolset` has many methods and properties that are not used or are redundant.",
              "justification": "The class contains methods like `getApiClient`, `toolSchemas`, `toolDocumentations`, and `baseClient` which are not used or are redundant. These methods can be removed to reduce the size and complexity of the class.",
              "impact": "This can lead to increased maintenance costs, reduced performance, and decreased readability.",
              "refactoring": "Remove the unused methods and properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields or Methods",
              "category": "Dispensables",
              "snippet": "The `OpenAPIToolset` class does not have any fields or methods.",
              "justification": "This class is an abstract base class that does not provide any functionality. It only serves as a placeholder for other classes to extend.",
              "impact": "Reduces the complexity of the codebase and can be removed without affecting the overall functionality.",
              "refactoring": "Remove the class and replace it with an interface or abstract class if necessary."
            },
            {
              "name": "Inconsistent Naming",
              "category": "Object-Orientation Abusers",
              "snippet": "The class name `OpenAPIToolset` is inconsistent with the file name `openapi-toolset.js`.",
              "justification": "Consistent naming conventions help improve readability and maintainability. This inconsistency could lead to confusion and errors.",
              "impact": "Improves code readability and reduces potential for errors.",
              "refactoring": "Rename the class to match the file name."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/integration/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/integration/integration.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields or Methods",
              "category": "Dispensables",
              "snippet": "The `Integration` class does not have any fields or methods.",
              "justification": "The class is empty and does not perform any specific functionality.",
              "impact": "Reduces the complexity of the codebase and can be removed without affecting the overall functionality.",
              "refactoring": "Remove the `Integration` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './integration.warning';\nexport * from './openapi-toolset.warning';\nexport * from './swagger-ui.warning';\nexport * from './swagger-ui-standalone.warning';\nexport * from './swagger-ui-standalone-pro.warning';\nexport * from './swagger-ui-standalone-pro-v3.warning';\nexport * from './swagger-ui-standalone-pro-v4.warning';",
              "justification": "Esta prática exporta todos os módulos de uma pasta, tornando o código mais difícil de entender e manter. Em vez disso, é recomendável exportar apenas os módulos que são realmente necessários.",
              "impact": "Aumenta a complexidade do código, tornando-o mais difícil de manter e testar. Também pode aumentar o tempo de compilação e o tamanho do bundle final.",
              "refactoring": "Organizar as exportações de forma mais específica, exportando apenas os módulos que são realmente utilizados."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/integration.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/tts/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `traced` method is defined but not used anywhere in the class.",
              "justification": "The `traced` method is defined but not utilized, which can lead to unused code and potential maintenance issues.",
              "impact": "Reduces code readability and maintainability by introducing unnecessary functionality.",
              "refactoring": "Remove the `traced` method or use it within the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/tts/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The class `MastaTTS` extends `BaseMastraTTS` but does not override any methods.",
              "justification": "Extending a base class without overriding methods is considered an object-orientation abuser because it does not provide any additional functionality or behavior.",
              "impact": "This can lead to confusion and potential bugs if the base class is modified in the future.",
              "refactoring": "Consider adding at least one method to `MastaTTS` that overrides a method from `BaseMastraTTS`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `logger.warn` statement is used to log a warning message, but it is not used anywhere else in the code.",
              "justification": "Logging warnings that are not used anywhere else is considered dispensable because they do not contribute to the functionality of the code.",
              "impact": "This can lead to clutter and unnecessary logging, which can make the code harder to read and maintain.",
              "refactoring": "Remove the `logger.warn` statement if it is not needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/multi-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `MultiLogger` class has many methods that delegate to its `loggers` array.",
              "justification": "Each method in `MultiLogger` is essentially a loop over the `loggers` array and calls the corresponding method on each logger. This can lead to code duplication and make it harder to maintain.",
              "impact": "Increased complexity, potential for bugs if not properly tested, and reduced readability.",
              "refactoring": "Consider creating a utility function or using a library like `lodash`'s `_.forEach` to handle the iteration."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `getLogs` and `getLogsByRunId` methods are similar in structure and functionality.",
              "justification": "Both methods iterate over the `loggers` array and call the same method on each logger. They also have similar parameters and logic, which suggests they could be combined into a single method.",
              "impact": "Reduces code duplication, simplifies maintenance, and improves readability.",
              "refactoring": "Combine the `getLogs` and `getLogsByRunId` methods into a single method that takes a common set of parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/default-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `ConsoleLogger` class has many methods that are not used or are redundant.",
              "justification": "The `ConsoleLogger` class has methods like `debug`, `info`, `warn`, and `error` that are not used in the implementation. Additionally, the `getLogs` and `getLogsByRunId` methods are also not used.",
              "impact": "This can lead to unnecessary code and make the class harder to maintain.",
              "refactoring": "Remove the unused methods and refactor the class to only include the necessary methods."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/constants.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Constants and Types definitions",
              "justification": "The constants and types are defined in a single place, which can lead to bloating if the number of constants or types grows significantly.",
              "impact": "Increased complexity and potential for errors if the number of constants or types increases.",
              "refactoring": "Consider breaking down the constants and types into smaller, more manageable groups."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "MastraLogger#trackException",
              "justification": "The method is too long and complex, making it difficult to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Split the method into smaller, more manageable functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "MastraLogger#getLogs",
              "justification": "The method takes a large number of parameters, which can make it difficult to read and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Refactor the method to use named parameters or a separate object for parameters."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "MastraLogger#getLogsByRunId",
              "justification": "The method takes a large number of parameters, which can make it difficult to read and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Refactor the method to use named parameters or a separate object for parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/noop-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Dispensable",
              "category": "Dispensables",
              "snippet": "noopLogger",
              "justification": "O objeto `noopLogger` não realiza nenhuma operação útil e pode ser removido sem impactar a funcionalidade do sistema.",
              "impact": "Redução da complexidade do código, melhorias na legibilidade e manutenibilidade.",
              "refactoring": "Remover o objeto `noopLogger`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/transport.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Multiple methods with similar logic in the same class",
              "justification": "The `LoggerTransport` class has two methods (`getLogs` and `getLogsByRunId`) that perform similar operations but with different parameters. This duplication increases the complexity and maintenance overhead.",
              "impact": "Increased code size, potential for errors due to duplicated logic, and difficulty in maintaining and testing the code.",
              "refactoring": "Combine the two methods into a single method that accepts a parameter specifying whether to filter by run ID."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Static method `createCustomTransport` that does not add value to the class",
              "justification": "The `createCustomTransport` method is static and does not modify the behavior of the `LoggerTransport` class. It simply returns a modified version of the input stream. This method does not provide any additional functionality and can be removed without affecting the class's behavior.",
              "impact": "Reduces the class's complexity and makes it easier to understand and maintain.",
              "refactoring": "Remove the `createCustomTransport` method."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/eval/types.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `EvaluationResult` interface extends `MetricResult` and includes an `output` property.",
              "justification": "Methods should be kept short to improve readability and maintainability. The `EvaluationResult` interface is extending `MetricResult`, which could lead to a long method if the `output` property is used extensively.",
              "impact": "This can make the code harder to understand and maintain, as it may require more time to read and comprehend the method's purpose.",
              "refactoring": "Consider breaking down the `EvaluationResult` interface into smaller, more focused interfaces or methods."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `EvaluationResult` interface includes an `output` property, which might indicate that the `output` logic is being moved towards the `EvaluationResult` class.",
              "justification": "Feature Envy occurs when a method or attribute in one class references data or methods of another class, indicating that the first class might not belong there. In this case, the `output` logic might be better suited to a separate class or utility function.",
              "impact": "This can lead to a class with too many responsibilities, making it harder to maintain and test.",
              "refactoring": "Consider extracting the `output` logic into a separate class or utility function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/evaluation.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `evaluate` function is too long and contains multiple responsibilities.",
              "justification": "The function performs several tasks including measuring a metric, executing hooks, and returning the result. This violates the Single Responsibility Principle.",
              "impact": "Increased complexity, harder to maintain, and potential for bugs if not properly tested.",
              "refactoring": "Split the function into smaller, more focused functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/metric.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "MetricResult interface and Metric abstract class",
              "justification": "Both the MetricResult interface and the Metric abstract class are large and contain many properties. This can lead to bloated code and make it difficult to maintain.",
              "impact": "The large size of these classes can increase the complexity of the codebase, making it harder to understand and modify. It also increases the risk of introducing bugs due to the large number of properties.",
              "refactoring": "Consider breaking down the MetricResult interface into smaller interfaces or using a more modular design."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "Metric abstract class",
              "justification": "The Metric abstract class is not properly encapsulated. It exposes too many details about its implementation, which can lead to tight coupling between the Metric class and its subclasses.",
              "impact": "This can make it difficult to change the implementation of the Metric class without affecting its subclasses. It also makes it harder to test the Metric class in isolation.",
              "refactoring": "Consider using an interface or abstract class to define the contract for the Metric class, and then implement the contract in the subclasses."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/agent.types.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Deprecated Property",
              "category": "Change Preventers",
              "snippet": "Deprecated properties: `resourceId`, `threadId`",
              "justification": "The use of deprecated properties can lead to confusion and potential bugs when updating the code in the future.",
              "impact": "Confusion and potential bugs when updating the code in the future.",
              "refactoring": "Replace deprecated properties with the new properties and update the code to use the new properties."
            },
            {
              "name": "Deprecated Property",
              "category": "Change Preventers",
              "snippet": "Deprecated property: `format`",
              "justification": "The use of deprecated properties can lead to confusion and potential bugs when updating the code in the future.",
              "impact": "Confusion and potential bugs when updating the code in the future.",
              "refactoring": "Replace deprecated property with the new properties and update the code to use the new properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/agent.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './input-processor';\nexport { TripWire } from './trip-wire';\nexport { MessageList, convertMessages } from './message-list';\nexport type { OutputFormat } from './message-list';\nexport * from './types';\nexport * from './agent';\nexport * from './utils';\n\nexport type {\n  AgentExecutionOptions,\n  InnerAgentExecutionOptions,\n  MultiPrimitiveExecutionOptions,\n  DeprecatedOutputOptions,\n} from './agent.types';\n\nexport type { MastraLanguageModel } from '../llm/model/shared.types';",
              "justification": "Exporting all modules using `export *` can lead to unnecessary complexity and make it harder to understand the module structure. It also increases the risk of name collisions if multiple modules export the same names.",
              "impact": "Reduces maintainability by making it harder to track dependencies and manage changes. Increases the risk of bugs due to name collisions.",
              "refactoring": "Consider organizing the exports into logical groups or using named exports where appropriate."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `tryGenerateWithJsonFallback` and `tryStreamWithJsonFallback` have a similar structure with only minor differences.",
              "justification": "Both functions perform the same task but with different types and parameters. This repetition can lead to code duplication and make it harder to maintain.",
              "impact": "Increased complexity, potential for errors due to duplicated logic, and difficulty in updating or extending the functionality.",
              "refactoring": "Extract a common function that handles the core logic and then call it from both `tryGenerateWithJsonFallback` and `tryStreamWithJsonFallback`. Use function overloading or generics to handle different types and parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Deprecated Class",
              "category": "Dispensables",
              "snippet": "export class Agent",
              "justification": "The class is marked as deprecated and should be replaced with the recommended import path.",
              "impact": "Reduces maintainability by encouraging the use of the correct import path.",
              "refactoring": "Replace the import path with '@mastra/core/agent'."
            },
            {
              "name": "Class Without Constructor",
              "category": "Bloaters",
              "snippet": "export class Agent",
              "justification": "The class does not have a constructor, which can lead to unexpected behavior if the class is extended or used in other contexts.",
              "impact": "Increases complexity and potential for bugs.",
              "refactoring": "Add a constructor to the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/test-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `getMessages` method is excessively long and complex.",
              "justification": "The method handles multiple conditions and formats, making it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the `getMessages` method into smaller, more focused functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `getMessages` method has a long list of parameters.",
              "justification": "Having many parameters can make the method harder to understand and use, leading to errors and decreased maintainability.",
              "impact": "Reduced readability, increased cognitive load, and potential for bugs due to the large number of parameters.",
              "refactoring": "Consider using an object or interface to group related parameters."
            },
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `saveMessages` method is excessively long and complex.",
              "justification": "The method handles multiple conditions and formats, making it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the `saveMessages` method into smaller, more focused functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `saveMessages` method has a long list of parameters.",
              "justification": "Having many parameters can make the method harder to understand and use, leading to errors and decreased maintainability.",
              "impact": "Reduced readability, increased cognitive load, and potential for bugs due to the large number of parameters.",
              "refactoring": "Consider using an object or interface to group related parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/trip-wire.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/save-queue/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/convert-messages.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `to` method in the `MessageConverter` class is excessively long and performs multiple conversions.",
              "justification": "The method contains multiple conditional branches that handle different output formats, making it difficult to maintain and extend.",
              "impact": "This can lead to increased complexity, reduced readability, and potential bugs if changes are made to the method.",
              "refactoring": "Consider breaking down the `to` method into smaller, more focused methods for each output format."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `convertMessages` function uses the `MessageConverter` class to perform its conversion logic.",
              "justification": "This violates the Single Responsibility Principle, as the `convertMessages` function is now responsible for both input handling and output conversion, which should be separated.",
              "impact": "This can make the code harder to understand and maintain, as changes to one part of the code may affect the other.",
              "refactoring": "Extract the conversion logic into a separate method within the `MessageConverter` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v4-v5/ui-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v4-v5/core-model-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v5/tool.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "function getToolName(type: string | { type: string }): string",
              "justification": "The function `getToolName` is excessively long, containing multiple conditional checks and string manipulations. This makes it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of lines and nested conditions.",
              "refactoring": "Consider breaking down the function into smaller, more focused methods or using helper functions to improve code organization."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "function getToolName(type: string | { type: string }): string",
              "justification": "The function `getToolName` is accessing properties of an object (`type`) that is not directly related to its primary responsibility (extracting a tool name). This violates the Single Responsibility Principle.",
              "impact": "Reduced cohesion between the function and the object, making it harder to understand and maintain.",
              "refactoring": "Extract the logic related to handling objects with a `type` property into a separate method or function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v5/gemini-compatibility.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/download-assets.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/image-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `createDataUri` function includes unnecessary logic for handling binary data.",
              "justification": "The function converts binary data to base64 and then checks if it starts with 'data:', which is redundant since the conversion already results in a data URI. This adds complexity without providing any additional value.",
              "impact": "Reduces readability and maintainability by introducing unnecessary code.",
              "refactoring": "Remove the check for 'data:' in the `createDataUri` function."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `parseDataUri` function does not handle cases where the MIME type is missing or invalid.",
              "justification": "The function assumes that the MIME type is always present and valid, which may not be the case in all scenarios. This makes the function less robust and error-prone.",
              "impact": "Increases the risk of errors and reduces the reliability of the function.",
              "refactoring": "Add error handling for cases where the MIME type is missing or invalid."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/invalid-content-error.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/data-content.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `convertDataContentToBase64String` function has a large number of conditional checks and conversions.",
              "justification": "The function performs multiple operations (conversion to Uint8Array, conversion to base64) based on the type of input, which can lead to bloated code.",
              "impact": "This can make the function harder to read and maintain, as well as potentially increase execution time due to repeated conversions.",
              "refactoring": "Consider creating separate helper functions for each conversion step to improve readability and maintainability."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/convert-file.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/attachments-to-parts.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/convert-to-mastra-v1.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/__tests__/mock-model.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/schema.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/stream-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/prepare-memory-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/prepare-tools-step.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `createPrepareToolsStep` is quite large and contains multiple complex operations.",
              "justification": "The function performs several tasks such as logging, converting tools, and returning results. This makes it difficult to understand and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The variable `toolEnhancements` is not used anywhere in the function.",
              "justification": "The variable is initialized but never referenced or modified, making it unnecessary.",
              "impact": "Reduces code size and improves performance.",
              "refactoring": "Remove the unused variable `toolEnhancements`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/map-results-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/pii-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The class PIIDetectorInputProcessor is implementing an old InputProcessor interface and is deprecated.",
              "justification": "The class is not used anymore and can be removed to reduce the codebase size.",
              "impact": "Reduces the codebase size, improves maintainability, and reduces the risk of errors.",
              "refactoring": "Remove the class PIIDetectorInputProcessor and use PIIDetector directly."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The type definitions for PIIDetectorOptions, PIIDetectionResult, PIICategories, PIICategoryScores, and PIIDetection are exported but not used anywhere in the code.",
              "justification": "These types are not used and can be removed to reduce the codebase size.",
              "impact": "Reduces the codebase size, improves maintainability, and reduces the risk of errors.",
              "refactoring": "Remove the type definitions for PIIDetectorOptions, PIIDetectionResult, PIICategories, PIICategoryScores, and PIIDetection."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/prompt-injection-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `PromptInjectionDetectorInputProcessor` extends `InputProcessor` and includes a private property `processor` of type `PromptInjectionDetector`. This property is initialized in the constructor with an instance of `PromptInjectionDetector`.",
              "justification": "The class has a private property that holds an instance of another class, which can lead to increased complexity and potential for bugs if not managed properly.",
              "impact": "This can make the class harder to understand and maintain, as it introduces a dependency on another class. It also increases the memory footprint of the class.",
              "refactoring": "Consider extracting the `PromptInjectionDetector` logic into a separate class or module to reduce coupling and improve modularity."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `PromptInjectionDetectorInputProcessor` class does not implement any methods that are specific to the `InputProcessor` interface. Instead, it simply forwards the `process` method to the `processor` instance.",
              "justification": "The class does not add any new functionality or behavior that is not already present in the `PromptInjectionDetector` class. It only serves as a wrapper and does not provide any additional value.",
              "impact": "This can make the class redundant and potentially confusing, as it does not add any new features or responsibilities.",
              "refactoring": "Consider removing the `PromptInjectionDetectorInputProcessor` class and using the `PromptInjectionDetector` class directly instead."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/language-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `LanguageDetectorInputProcessor` extends `InputProcessor` and includes a private property `processor` of type `LanguageDetector`. This property is initialized in the constructor with an instance of `LanguageDetector` created with the provided `options`.",
              "justification": "The class contains unnecessary properties and methods that are not directly related to its primary functionality. The `processor` property is not used within the class, making it redundant.",
              "impact": "This can lead to increased memory usage and potential performance issues due to the unnecessary storage of the `processor` object. It also makes the class harder to understand and maintain.",
              "refactoring": "Remove the `processor` property and use the `LanguageDetector` directly within the class."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `LanguageDetectorInputProcessor` class does not implement any methods that are not required by the `InputProcessor` interface. The `process` method simply calls the `processInput` method of the `processor` object.",
              "justification": "The class does not add any value to the `InputProcessor` interface beyond what is already provided by the `LanguageDetector` class. The `process` method can be removed without affecting the functionality of the class.",
              "impact": "Removing the `process` method can simplify the class and reduce the risk of introducing bugs or errors.",
              "refactoring": "Remove the `process` method and call the `processInput` method directly on the `processor` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/moderation.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `ModerationInputProcessor` class does not implement any methods or properties that are required by the `InputProcessor` interface, making it redundant and potentially unnecessary.",
              "justification": "The class only wraps the `ModerationProcessor` and does not add any additional functionality, so it can be removed without affecting the overall functionality.",
              "impact": "This can lead to reduced code size, decreased complexity, and potential maintenance issues.",
              "refactoring": "Remove the `ModerationInputProcessor` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/unicode-normalizer.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `UnicodeNormalizerInputProcessor`",
              "justification": "The class contains a private property `processor` that is not used anywhere in the class. This property is likely a leftover from an older version of the code.",
              "impact": "This can lead to unnecessary memory usage and potential bugs if the property is accidentally modified or accessed.",
              "refactoring": "Remove the unused private property `processor`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Type alias `UnicodeNormalizerOptions`",
              "justification": "The type alias `UnicodeNormalizerOptions` is not used anywhere in the code. It is likely a leftover from an older version of the code.",
              "impact": "This can lead to unnecessary complexity and potential bugs if the type alias is accidentally modified or accessed.",
              "refactoring": "Remove the unused type alias `UnicodeNormalizerOptions`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/relevance-score-provider.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "createSimilarityPrompt function",
              "justification": "The function is overly complex with unnecessary details. It includes a prompt template that could be extracted into a separate constant or configuration object.",
              "impact": "Increases code complexity, makes it harder to maintain, and may lead to duplication if the prompt is reused elsewhere.",
              "refactoring": "Extract the prompt template into a separate constant or configuration object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/relevance/cohere/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `getRelevanceScore` method is too long and complex.",
              "justification": "The method performs multiple tasks including API request, error handling, and data parsing, which makes it difficult to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Split the method into smaller, more focused functions."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `getRelevanceScore` method accesses properties of the `CohereRelevanceScorer` instance.",
              "justification": "The method is tightly coupled with the instance's state, which violates the Single Responsibility Principle and can lead to tight coupling between classes.",
              "impact": "Reduced cohesion, increased coupling, and potential for bugs.",
              "refactoring": "Extract the logic related to API requests and error handling into a separate utility function."
            },
            {
              "name": "Data Clumps",
              "category": "Bloaters",
              "snippet": "The `CohereRerankingResponse` interface includes fields that are not used in the implementation.",
              "justification": "The interface contains fields that are not utilized in the implementation, leading to unnecessary complexity and potential for errors.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Remove unused fields from the interface."
            },
            {
              "name": "Primitive Obsession",
              "category": "Bloaters",
              "snippet": "The `CohereRerankingResponse` interface uses primitive types (`string`, `number`) instead of objects or enums.",
              "justification": "Using primitive types can lead to errors and make the code harder to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Replace primitive types with objects or enums."
            },
            {
              "name": "Inappropriate Intimacy",
              "category": "Couplers",
              "snippet": "The `CohereRelevanceScorer` class has a dependency on the `RelevanceScoreProvider` interface.",
              "justification": "The class is tightly coupled with an interface that it does not need to implement, which can lead to unnecessary dependencies and potential for bugs.",
              "impact": "Increased complexity, potential for bugs, and reduced flexibility.",
              "refactoring": "Remove the dependency on the `RelevanceScoreProvider` interface."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/mastra-agent/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `getRelevanceScore` method is too long and complex.",
              "justification": "The method contains multiple steps that could be separated into smaller methods for better readability and maintainability.",
              "impact": "Increased complexity, potential for bugs, and reduced testability.",
              "refactoring": "Split the `getRelevanceScore` method into smaller, more focused methods."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `getRelevanceScore` method accesses the `agent`'s properties directly.",
              "justification": "The method should be encapsulated within the `MastraAgentRelevanceScorer` class to improve encapsulation and reduce coupling.",
              "impact": "Reduced cohesion, potential for tight coupling, and increased difficulty in testing.",
              "refactoring": "Move the `agent` property and its methods into the `MastraAgentRelevanceScorer` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/test-utils/llm-mock.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `createMockModel` has a large number of parameters and uses multiple imports.",
              "justification": "The function takes many parameters, which can lead to long parameter lists and make the function harder to read. Additionally, it uses multiple imports, which can increase the size of the module and make it harder to maintain.",
              "impact": "This can make the function harder to understand and maintain, as well as increase the risk of errors due to incorrect parameter values or missing imports.",
              "refactoring": "Consider breaking down the function into smaller functions or using a configuration object to pass in all the necessary parameters."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The variable `finalText` is assigned the value of `text` if `objectGenerationMode` is not 'json'. This variable is not used anywhere else in the function.",
              "justification": "The variable `finalText` is only used once in the function, and its value is determined by the `objectGenerationMode` parameter. Since it is not used elsewhere, it can be removed to simplify the function.",
              "impact": "This can make the function easier to understand and maintain, as well as reduce the risk of errors due to unused variables.",
              "refactoring": "Remove the variable `finalText` and directly use the value of `text` in the function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/loop.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/mockTracer.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `MockSpan` class has a long method `addEvent` that handles multiple cases for adding events to the span.",
              "justification": "The method is too complex and long, making it difficult to read and maintain. It also violates the Single Responsibility Principle.",
              "impact": "This can lead to increased complexity in the codebase, making it harder to understand and modify over time.",
              "refactoring": "Consider breaking down the `addEvent` method into smaller, more focused methods."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `startActiveSpan` method has a long parameter list with multiple optional parameters.",
              "justification": "Having many parameters in a single method call can make the method signature complex and hard to read. It also makes the method harder to use and understand.",
              "impact": "This can lead to increased complexity in the codebase, making it harder to understand and modify over time.",
              "refactoring": "Consider breaking down the `startActiveSpan` method into smaller, more focused methods or using default values for optional parameters."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `MockSpan` class has methods that are not related to its primary responsibility of representing a span.",
              "justification": "Methods like `addLink`, `addLinks`, `setStatus`, `updateName`, `end`, `isRecording`, and `recordException` are not directly related to the `MockSpan` class's primary responsibility of representing a span. They are more related to the `Span` interface.",
              "impact": "This can lead to increased coupling between classes and make the codebase harder to understand and maintain.",
              "refactoring": "Consider extracting these methods into separate classes or interfaces that are more closely related to their responsibilities."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/generateText.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/streamObject.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/tools.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/textStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/toUIMessageStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/mock-server-response.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/fullStream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The code contains unnecessary imports and unused variables.",
              "justification": "Imports like `@ai-sdk/provider-utils-v5`, `convertAsyncIterableToArray`, `tool`, `convertArrayToReadableStream`, `mockValues`, `mockId`, `describe`, `expect`, `it`, `vi`, `z`, `MessageList`, `loop`, `createMessageListWithUserMessage`, `createTestModels`, `defaultSettings`, `mockDate`, `modelWithFiles`, `modelWithReasoning`, `modelWithSources`, `testUsage`, `testUsage2`, `fullStreamTests`, `MastraLanguageModelV2Mock` are not used anywhere in the code. These imports and variables add unnecessary bloat to the codebase.",
              "impact": "Increased code size, potential for bugs due to unused imports, and decreased readability.",
              "refactoring": "Remove unused imports and variables."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/options.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/resultObject.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/MastraLanguageModelV2Mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/telemetry.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/schema.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/stream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/run-state.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/tool-call-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/llm-mapping-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/llm-execution-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-loop/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/telemetry/noop.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "noopSpanContext and noopSpan are simple objects with minimal functionality.",
              "justification": "These objects are used to simulate the behavior of real spans and contexts, but they lack any meaningful methods or properties. This can lead to confusion and potential misuse in larger systems.",
              "impact": "The use of these simple objects can make the code harder to understand and maintain, as it may not be immediately clear what their purpose is or how they interact with other parts of the system.",
              "refactoring": "Consider creating more complex classes or interfaces for span and context objects, with meaningful methods and properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/telemetry/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/network/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/MastraAgentNetworkStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/RunOutput.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/MastraWorkflowStream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `#usageCount` object is used to track token usage, which can grow large over time and lead to performance issues.",
              "justification": "Tracking token usage in a large object can consume memory and processing power, especially if the workflow runs for extended periods.",
              "impact": "High memory usage and potential performance degradation due to the accumulation of token usage data.",
              "refactoring": "Consider using a more efficient data structure or a separate class to manage token usage."
            },
            {
              "name": "Change Preventers",
              "category": "Change Preventers",
              "snippet": "The `#streamPromise` object is used to manage the lifecycle of the stream, but it is not used to handle errors or exceptions that may occur during the stream creation or reading process.",
              "justification": "The `#streamPromise` object is not designed to handle errors or exceptions, which can lead to unexpected behavior or crashes if an error occurs.",
              "impact": "Potential loss of data or application instability due to unhandled errors or exceptions.",
              "refactoring": "Consider adding error handling and exception management to the `#streamPromise` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/file.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Lazy Evaluation",
              "category": "Change Preventers",
              "snippet": "The `base64` and `uint8Array` properties are implemented using lazy evaluation.",
              "justification": "Lazy evaluation can lead to performance issues if not properly managed, especially in scenarios where these properties are accessed frequently.",
              "impact": "Increased memory usage due to caching, potential performance degradation if accessed multiple times without proper management.",
              "refactoring": "Consider using a getter with a boolean flag to control whether the conversion should be performed."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The `DefaultGeneratedFile` class uses inheritance to extend functionality, but it does not add any new behavior or properties.",
              "justification": "Inheritance should be used judiciously to avoid creating overly complex classes that do not add value.",
              "impact": "Increased complexity and potential for confusion, as the class does not provide any additional functionality beyond what is already available in the base class.",
              "refactoring": "Consider using composition instead of inheritance to achieve the same functionality."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/output.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/output-helpers.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Constructor with many parameters",
              "justification": "The constructor takes multiple parameters, which can lead to long and complex constructors. This can make the class harder to read and maintain.",
              "impact": "Increased complexity, reduced readability, potential for errors due to incorrect parameter values.",
              "refactoring": "Consider using a builder pattern or a factory method to create instances of the class."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Unused properties in the class",
              "justification": "The `request`, `response`, and `providerMetadata` properties are not used anywhere in the class. These properties can be removed to simplify the class.",
              "impact": "Reduced complexity, improved readability, potential for bugs if these properties are accidentally used.",
              "refactoring": "Remove unused properties from the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/execute.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `ReadableStream` is being used without proper error handling and the `@ts-ignore` comment is present.",
              "justification": "Using `ReadableStream` without proper error handling can lead to runtime errors. The `@ts-ignore` comment is a workaround for TypeScript's strict type checking, which can be risky in production environments.",
              "impact": "This can make the code less robust and harder to maintain.",
              "refactoring": "Consider adding try-catch blocks around the `for await` loop to handle potential errors gracefully."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `controller.enqueue(transformedChunk);` line is redundant if `transformedChunk` is always truthy.",
              "justification": "If `transformedChunk` is always truthy, the `enqueue` method will always be called, which can be considered redundant.",
              "impact": "This can make the code less readable and potentially unnecessary.",
              "refactoring": "Remove the redundant `enqueue` call if `transformedChunk` is always truthy."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/transform.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `convertFullStreamChunkToMastra` function is excessively long and performs multiple tasks.",
              "justification": "The function handles various types of stream parts and constructs different chunk types based on the input. This makes it difficult to maintain and understand.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the function into smaller, more focused methods that handle each type of stream part separately."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/test-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `createTestModel` function has a large number of parameters and uses a lot of imports.",
              "justification": "The function takes multiple parameters and uses several external libraries, which can lead to bloated code and make it harder to maintain.",
              "impact": "Increased complexity, potential for errors, and reduced readability.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions or using a builder pattern to reduce the number of parameters."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `testUsage` object is not used anywhere in the code.",
              "justification": "The object contains only static values that are not referenced or modified within the function. It can be removed without affecting the functionality.",
              "impact": "Reduces code size and complexity, making the code easier to understand and maintain.",
              "refactoring": "Remove the `testUsage` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/prepare-tools.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/ui-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/media.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `stripID3` function is used in multiple places and has a similar implementation.",
              "justification": "The function is duplicated across different parts of the codebase, which increases complexity and maintenance overhead.",
              "impact": "The duplication can lead to inconsistencies and errors if the implementation changes in one place but not the others.",
              "refactoring": "Extract the `stripID3` function into a separate module or utility file."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/consume-stream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/delayed-promise.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Lazy Initialization",
              "category": "Dispensables",
              "snippet": "The `DelayedPromise` class uses lazy initialization for its `_promise` property.",
              "justification": "Lazy initialization can lead to unnecessary object creation and can be replaced with a simple getter that returns a promise.",
              "impact": "Reduces memory usage and improves performance by avoiding unnecessary object creation.",
              "refactoring": "Replace the lazy initialization with a simple getter that returns a promise."
            },
            {
              "name": "Unnecessary Property",
              "category": "Dispensables",
              "snippet": "The `DelayedPromise` class has an unnecessary property `status` that is not used anywhere in the class.",
              "justification": "The `status` property can be removed as it does not contribute to the functionality of the class.",
              "impact": "Reduces memory usage and improves performance by removing unnecessary properties.",
              "refactoring": "Remove the `status` property."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/validation.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/content.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './content';\nexport * from './media';\nexport * from './ui-message';\nexport * from './validation';\nexport * from './delayed-promise';\nexport * from './prepare-tools';\nexport * from './consume-stream';\nexport * from './utils';",
              "justification": "Exporting all modules at once can lead to unnecessary complexity and make it harder to manage dependencies. It also reduces the ability to selectively import only what is needed.",
              "impact": "Increased complexity, reduced maintainability, and potential for performance issues due to unnecessary imports.",
              "refactoring": "Consider using named exports or importing specific modules as needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v4/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `for await` loop is used to iterate over the `stream`, which can lead to performance issues if the stream is large.",
              "justification": "The `for await` loop is synchronous and can block the event loop, leading to performance degradation when dealing with large streams.",
              "impact": "High impact on performance, especially in scenarios where the stream is large or the application is under heavy load.",
              "refactoring": "Consider using an asynchronous iterator or a generator to handle the stream more efficiently."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `controller.enqueue(transformedChunk);` line is redundant if `transformedChunk` is `null` or `undefined`.",
              "justification": "If `transformedChunk` is not valid, it should be skipped or handled appropriately without enqueuing it.",
              "impact": "Low impact on functionality but can lead to unnecessary processing and potential bugs.",
              "refactoring": "Add a check to ensure `transformedChunk` is valid before enqueuing it."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v4/transform.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Switch Statement",
              "category": "Change Preventers",
              "snippet": "The function uses a switch statement to handle different types of input values.",
              "justification": "Switch statements can lead to tight coupling and make it difficult to add new cases without modifying the existing code. This can prevent changes from being made in the future.",
              "impact": "Increased complexity, difficulty in adding new features, and potential for bugs if not properly managed.",
              "refactoring": "Consider using a map or object to handle different types of input values, which can make it easier to add new cases and improve maintainability."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/schema.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The code contains multiple imports for different versions of the same library ('zod/v3' and 'zod/v4').",
              "justification": "Multiple imports for the same library can lead to confusion and potential issues with version compatibility.",
              "impact": "Increased complexity, potential for errors due to version mismatches, and reduced maintainability.",
              "refactoring": "Combine the imports into a single import statement for the latest version of 'zod'."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `asJsonSchema` function returns `undefined` when the input `schema` is `undefined`. This can be simplified by returning `undefined` directly without checking the condition.",
              "justification": "Returning `undefined` directly simplifies the function and avoids unnecessary checks.",
              "impact": "Reduced complexity and improved readability.",
              "refactoring": "Remove the condition and return `undefined` directly."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `getTransformedSchema` function returns `undefined` when the input `schema` is `undefined`. This can be simplified by returning `undefined` directly without checking the condition.",
              "justification": "Returning `undefined` directly simplifies the function and avoids unnecessary checks.",
              "impact": "Reduced complexity and improved readability.",
              "refactoring": "Remove the condition and return `undefined` directly."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/output.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/base/consume-stream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "O método `consumeStream` tem uma lógica simples que pode ser simplificada.",
              "justification": "O método não faz uso de nenhuma estrutura de dados complexa ou de funções auxiliares. A lógica pode ser reduzida para apenas ler o stream até que ele termine.",
              "impact": "Reduzirá a complexidade do código, melhorando a legibilidade e a manutenibilidade.",
              "refactoring": "Remover a lógica de leitura do stream dentro do método `consumeStream`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "O método `consumeStream` não usa a variável `onError`.",
              "justification": "A variável `onError` não é utilizada dentro do método, tornando-a dispensável.",
              "impact": "Removerá a variável desnecessária, melhorando a performance e a legibilidade do código.",
              "refactoring": "Remover a variável `onError` do método `consumeStream`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `initialize` method creates a new `ReadableStream` and starts it asynchronously.",
              "justification": "Creating a new `ReadableStream` and starting it asynchronously can lead to bloated code as it introduces unnecessary complexity and potential for errors.",
              "impact": "This can make the code harder to understand and maintain, as well as potentially increase the risk of bugs due to asynchronous operations.",
              "refactoring": "Consider using a more synchronous approach or refactoring the code to avoid creating a new `ReadableStream` and starting it asynchronously."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/stream/base/output-format-handlers.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/base/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `consumeStream` method in the `MastaBaseStream` interface is too long and complex.",
              "justification": "Methods should be kept short and focused to improve readability and maintainability. The `consumeStream` method contains multiple parameters and logic that could be extracted into smaller methods or functions.",
              "impact": "This can lead to increased complexity, reduced readability, and potential bugs if not properly managed.",
              "refactoring": "Extract the logic related to handling options into separate methods or functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/server/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/auth.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/composite-auth.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `CompositeAuth` class has multiple methods that delegate authentication and authorization to its providers.",
              "justification": "This design pattern can lead to bloated code as it spreads the logic across multiple methods. Each method is responsible for calling a provider's method, which can make the code harder to understand and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for errors if any provider fails to authenticate or authorize.",
              "refactoring": "Consider using a single method that iterates over the providers and returns the result of the first successful authentication or authorization."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The `CompositeAuth` class does not encapsulate its behavior well. It relies on the providers to handle authentication and authorization, which can lead to tight coupling between the composite and its providers.",
              "justification": "This design pattern can lead to tight coupling, making it difficult to change or extend the behavior of the composite without affecting its providers. Encapsulation would help in managing the behavior more effectively.",
              "impact": "Reduced flexibility, difficulty in testing, and potential for bugs if the providers' behavior changes.",
              "refactoring": "Consider creating an interface for the providers and having the composite implement this interface. This would allow for better decoupling and easier testing."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/server/simple-auth.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `validateOptions` has a large number of conditional checks.",
              "justification": "The function contains multiple checks for required properties and error handling, which can lead to bloated code.",
              "impact": "This can make the function harder to read and maintain, as well as increase the risk of errors due to complex logic.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions that handle each specific validation step."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/di/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Redundant Import",
              "category": "Object-Orientation Abusers",
              "snippet": "import { RuntimeContext as RuntimeContextType } from '../runtime-context';",
              "justification": "O import redundante está importando a mesma classe duas vezes com diferentes nomes. Isso pode confundir o desenvolvedor e pode levar a erros de compilação se houver conflitos entre as duas importações.",
              "impact": "Reduz a legibilidade do código e pode causar confusão para outros desenvolvedores.",
              "refactoring": "Remover uma das importações redundantes."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/memory/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/memory/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/memory/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields",
              "category": "Dispensables",
              "snippet": "The `MastaMemory` class does not have any fields or properties.",
              "justification": "Classes without fields are typically empty and can be removed to simplify the codebase.",
              "impact": "Reduces complexity, improves readability, and reduces maintenance overhead.",
              "refactoring": "Remove the `MastaMemory` class."
            },
            {
              "name": "Empty Constructor",
              "category": "Dispensables",
              "snippet": "The `MastaMemory` class has an empty constructor.",
              "justification": "Empty constructors are often unnecessary and can be removed to simplify the class definition.",
              "impact": "Reduces complexity, improves readability, and reduces maintenance overhead.",
              "refactoring": "Remove the empty constructor."
            },
            {
              "name": "Logger Usage",
              "category": "Change Preventers",
              "snippet": "The `MastaMemory` class uses the `logger.warn` method.",
              "justification": "Using the logger for warnings can prevent changes from being made without logging them, which can lead to issues if the logger is not properly configured or disabled.",
              "impact": "Increases the risk of changes not being logged, potentially leading to bugs or security vulnerabilities.",
              "refactoring": "Replace the logger usage with a more appropriate logging mechanism or remove it if it's not necessary."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/memory/memory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/execution-engine.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `execute` method is excessively long and complex.",
              "justification": "The method contains multiple parameters and performs various operations, making it difficult to maintain and understand.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to increased coupling between different parts of the code.",
              "refactoring": "Consider breaking down the method into smaller, more focused functions or using object-oriented design principles to improve modularity."
            },
            {
              "name": "Large Class",
              "category": "Object-Orientation Abusers",
              "snippet": "The `ExecutionEngine` class is large and contains many methods and properties.",
              "justification": "The class has a high number of responsibilities and methods, which can lead to tight coupling and make it difficult to maintain and extend.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to increased coupling between different parts of the code.",
              "refactoring": "Consider refactoring the class into smaller, more focused classes or using object-oriented design principles to improve modularity."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `execute` method accesses properties and methods of the `RegisteredLogger` class.",
              "justification": "The method is accessing properties and methods of another class, which can lead to tight coupling and make it difficult to maintain and extend.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to increased coupling between different parts of the code.",
              "refactoring": "Consider moving the method to the `RegisteredLogger` class or using object-oriented design principles to improve modularity."
            },
            {
              "name": "Data Clumps",
              "category": "Bloaters",
              "snippet": "The `ExecutionEngineOptions` interface contains multiple related properties.",
              "justification": "The interface contains multiple related properties that are not logically grouped together, which can lead to increased complexity and reduced readability.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to increased coupling between different parts of the code.",
              "refactoring": "Consider grouping related properties into a single interface or using object-oriented design principles to improve modularity."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/workflow.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class with too many responsibilities",
              "category": "Change Preventers",
              "snippet": "The `Workflow` class extends `BaseWorkflow` and includes additional logic in the constructor.",
              "justification": "The `Workflow` class is responsible for both workflow configuration and logging, which are separate concerns. This can lead to tight coupling and make it difficult to maintain and extend.",
              "impact": "Increased complexity, reduced maintainability, and potential for bugs if the logging logic changes.",
              "refactoring": "Extract the logging logic into a separate method or class."
            },
            {
              "name": "Redundant import",
              "category": "Dispensables",
              "snippet": "The line `import * from './index';` is redundant because it imports everything from the current module.",
              "justification": "Imports should only include what is necessary to avoid unnecessary dependencies and improve performance.",
              "impact": "Reduced code size, improved build times, and reduced risk of conflicts.",
              "refactoring": "Remove the redundant import."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/default.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/constants.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "StreamFormatter and StreamEmitter classes are singletons.",
              "justification": "Singletons can lead to tight coupling and make it difficult to test individual components.",
              "impact": "Increased complexity in testing and maintenance.",
              "refactoring": "Consider using dependency injection or factory patterns to create instances of these classes."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "EMITTER_SYMBOL, STREAM_FORMAT_SYMBOL, and STREAM_FORMATTER_SYMBOL are symbols used for internal purposes.",
              "justification": "Symbols are typically used for internal purposes and can be replaced with more descriptive names or removed if they are not needed.",
              "impact": "Reduced cognitive load and improved code readability.",
              "refactoring": "Replace symbols with more descriptive names or remove them if they are not used."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/workflows/workflow.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './workflow.warning';\nexport * from './execution-engine';\nexport * from './default';\nexport * from './step';\nexport * from './types';",
              "justification": "Exporting all modules using `export *` is generally considered a code smell because it can lead to namespace pollution and make it harder to understand the dependencies between modules. It also makes it difficult to track changes and maintain the codebase.",
              "impact": "This can negatively impact the readability, maintainability, and scalability of the codebase.",
              "refactoring": "Consider organizing the exports into named exports or using a module bundler that supports tree shaking to reduce the bundle size."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/execution-engine.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `execute` method is too long and contains multiple responsibilities.",
              "justification": "The method handles both starting a workflow and resuming or time-traveling it, which are distinct operations. This makes the method complex and difficult to maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to overlapping concerns.",
              "refactoring": "Split the `execute` method into two separate methods: one for starting a workflow and another for resuming or time-traveling it."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/step-executor.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/loop.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `processWorkflowLoop` and `processWorkflowForEach` functions are long and contain multiple conditional statements.",
              "justification": "Long methods can make the code difficult to read and maintain. They also increase the risk of bugs due to increased complexity.",
              "impact": "Increased complexity, reduced readability, potential for bugs, and longer development time.",
              "refactoring": "Consider breaking down these functions into smaller, more focused functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/sleep.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/parallel.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/machine.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/workflow.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/workflow-instance.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/voice/voice.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `speak` and `listen` methods are long and complex.",
              "justification": "Both methods handle multiple cases and options, making them difficult to maintain and extend.",
              "impact": "Increased complexity, reduced readability, and potential for bugs.",
              "refactoring": "Split the methods into smaller, more focused functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/voice/default-voice.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The class `DefaultVoice` contains multiple methods that throw the same error, which is repeated in each method.",
              "justification": "This repetition increases the size of the class and makes it harder to maintain. It also reduces the readability and maintainability of the code.",
              "impact": "The code becomes less readable and harder to maintain, as well as increasing the risk of errors if the error message or domain changes.",
              "refactoring": "Extract the error creation logic into a separate method."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The class `DefaultVoice` does not implement any functionality that is not provided by the base class `MastaVoice`. This means that the class can be removed without affecting the behavior of the application.",
              "justification": "Removing dispensable classes can simplify the codebase and make it easier to understand and maintain.",
              "impact": "The codebase becomes simpler and more maintainable, as well as reducing the risk of errors if the class is accidentally used.",
              "refactoring": "Remove the `DefaultVoice` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/voice/composite-voice.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/voice/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/voice/aisdk/speech.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/voice/aisdk/transcription.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `experimental_transcribe` function is imported and used without being utilized in the class.",
              "justification": "The function is imported but not used, which increases the size of the codebase and makes it harder to maintain.",
              "impact": "Increased code size, potential for bugs if the function is needed later, and difficulty in understanding the code flow.",
              "refactoring": "Remove the unused import and remove the call to `experimental_transcribe`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/voice/aisdk/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/processors/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Change Preventers",
              "category": "Change Preventers",
              "snippet": "The `Processor` interface has multiple optional methods that can be implemented in different ways, leading to potential for changes that are not easily tracked or managed.",
              "justification": "This design can make it difficult to track changes and ensure consistency across different implementations. Consider using a more explicit approach to define the behavior of processors, such as using interfaces or abstract classes.",
              "impact": "Increased complexity, potential for changes that are not easily tracked or managed, and potential for reduced maintainability.",
              "refactoring": "Consider using interfaces or abstract classes to define the behavior of processors. For example, create an abstract class with default implementations for the optional methods."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/processors/runner.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/processors/processors/pii-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `detectPII` method in the `PIIDetector` class is excessively long and contains multiple logic paths.",
              "justification": "Methods should be kept short and focused on a single responsibility. This method handles various configurations, detection logic, and redaction strategies, making it difficult to maintain and understand.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to long execution times.",
              "refactoring": "Split the `detectPII` method into smaller, more focused methods."
            }
          ]
        }
      }
    },
    "@mastra/dane@0.1.25": {
      "/content/mastra/packages/core/src/zod-to-json.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Unnecessary Export",
              "category": "Dispensables",
              "snippet": "export { zodToJsonSchema } from '@mastra/schema-compat/zod-to-json';",
              "justification": "The export is not used in the code snippet provided.",
              "impact": "Reduces the size of the bundle and improves loading times.",
              "refactoring": "Remove the unnecessary export."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "Exporting all modules using `export *`",
              "justification": "This practice can lead to bloating the module and making it harder to understand which modules are being used.",
              "impact": "Increased file size, potential for unused imports, and reduced maintainability.",
              "refactoring": "Consider exporting only the necessary modules or using named exports."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/base.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields",
              "category": "Dispensables",
              "snippet": "The `MastaBase` class does not have any fields or properties.",
              "justification": "Classes without fields are typically used for utility purposes or to extend other classes. In this case, the class is extending `MastaBaseBase` and does not add any new functionality.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the class if it is not needed."
            },
            {
              "name": "Empty Constructor",
              "category": "Dispensables",
              "snippet": "The `MastaBase` constructor does not perform any operations.",
              "justification": "Constructors that do not perform any operations can be removed to simplify the class.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the constructor if it is not needed."
            },
            {
              "name": "Static Method Without Logic",
              "category": "Dispensables",
              "snippet": "The `warn` method in the `MastaBase` class does not contain any logic.",
              "justification": "Methods that do not contain any logic can be removed to simplify the class.",
              "impact": "Reduces the cognitive load for developers who need to understand the class's purpose.",
              "refactoring": "Consider removing the `warn` method if it is not needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "Método `__setLogger` e `__setTelemetry`",
              "justification": "Os métodos `__setLogger` e `__setTelemetry` são muito longos e contêm muitas instruções. Isso dificulta a manutenção e torna difícil identificar onde ocorrem mudanças.",
              "impact": "O aumento do tamanho dos métodos pode levar a erros de compreensão e dificultar a refatoração. Além disso, métodos longos podem tornar o código mais difícil de testar e entender.",
              "refactoring": "Dividir esses métodos em métodos menores, cada um com uma única responsabilidade."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "Método `get experimental_telemetry`",
              "justification": "O método `get experimental_telemetry` parece estar enviesado para o objeto `this.telemetry`, pois ele acessa propriedades e métodos diretamente do objeto. Isso pode indicar que a responsabilidade do objeto `this.telemetry` está sendo transferida para o objeto `MastaBase`, violando o princípio de encapsulamento.",
              "impact": "O enviesamento de características pode tornar o código menos modular e mais difícil de manter. Além disso, métodos enviesados podem dificultar a reutilização e a teste do código.",
              "refactoring": "Reorganizar o código para que o método `get experimental_telemetry` não dependa diretamente do objeto `this.telemetry`. Em vez disso, passar o objeto `this.telemetry` como um parâmetro para o método."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/constants.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/base.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields",
              "category": "Dispensables",
              "snippet": "The `MastaStorage` class does not have any fields.",
              "justification": "Classes without fields are typically dispensable and can be removed to simplify the codebase.",
              "impact": "Reduces complexity and improves maintainability by removing unnecessary code.",
              "refactoring": "Remove the `MastaStorage` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/index.warning.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/storageWithInit.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Proxy Pattern",
              "category": "Object-Orientation Abusers",
              "snippet": "proxy = new Proxy(storage, {...})",
              "justification": "The use of a Proxy object to intercept and modify access to the storage object's properties. This pattern can lead to increased complexity and potential performance overhead.",
              "impact": "Can make the code harder to understand and maintain, especially for those unfamiliar with Proxy objects. It may also introduce additional latency due to the need to wait for the `ensureInit` function to complete before executing any method calls.",
              "refactoring": "Consider using a more straightforward approach to handle asynchronous initialization without relying on a Proxy object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class with only one method",
              "category": "Dispensables",
              "snippet": "export class Derived extends Base { ... }",
              "justification": "The Derived class contains only one method, which is not necessary and can be removed.",
              "impact": "Reduces the complexity of the codebase, improves maintainability, and reduces the risk of introducing bugs.",
              "refactoring": "Remove the Derived class and move its functionality to the Base class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/legacy-evals/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "LegacyEvalsStorage.getEvals",
              "justification": "The method `getEvals` is too long and complex, with multiple parameters and a promise return type. This makes it difficult to understand and maintain.",
              "impact": "It can lead to increased complexity in the codebase, making it harder to refactor and extend in the future.",
              "refactoring": "Consider breaking down the method into smaller, more focused methods that handle specific parts of the logic."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "LegacyEvalsStorage.getEvals",
              "justification": "The method `getEvals` has a long list of parameters, including optional ones like `agentName`, `type`, and pagination arguments. This can make the method difficult to read and understand.",
              "impact": "It can lead to increased complexity in the codebase, making it harder to refactor and extend in the future.",
              "refactoring": "Consider using an object or a class to encapsulate the parameters, making the method signature cleaner and easier to manage."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/observability/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/operations/base.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/memory/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Multiple methods for handling different formats of messages",
              "justification": "The `getMessages` and `saveMessages` methods have multiple overloads that handle different formats ('v1' and 'v2'). This increases the complexity and maintenance overhead.",
              "impact": "Increased complexity, potential for errors, and difficulty in maintaining the codebase.",
              "refactoring": "Consider consolidating these methods into a single method with a parameter to specify the format."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/workflows/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `updateWorkflowResults` and `updateWorkflowState` methods are long and complex.",
              "justification": "These methods perform multiple operations related to workflow results and state updates, which can lead to increased complexity and difficulty in maintaining the code.",
              "impact": "Increased maintenance effort, potential for bugs, and reduced readability.",
              "refactoring": "Consider breaking these methods into smaller, more focused functions."
            },
            {
              "name": "Large Class",
              "category": "Object-Orientation Abusers",
              "snippet": "The `WorkflowsStorage` class is large and contains many methods.",
              "justification": "Having a large class can make it difficult to understand and maintain, as well as increase the risk of introducing bugs due to increased complexity.",
              "impact": "Reduced maintainability, increased testing complexity, and potential for performance issues.",
              "refactoring": "Consider refactoring the class into smaller, more focused classes or modules."
            },
            {
              "name": "Feature Envy",
              "category": "Change Preventers",
              "snippet": "The `updateWorkflowResults` method accesses the `runtimeContext` property, which is not directly related to its functionality.",
              "justification": "This can make it difficult to change the method's behavior without affecting unrelated parts of the code, leading to increased coupling and decreased flexibility.",
              "impact": "Increased coupling between classes, reduced maintainability, and potential for bugs.",
              "refactoring": "Consider extracting the `runtimeContext` access into a separate method or class."
            },
            {
              "name": "Data Clumps",
              "category": "Couplers",
              "snippet": "The `updateWorkflowResults` and `updateWorkflowState` methods both take similar parameters, such as `workflowName`, `runId`, and `stepId`, but they perform different operations.",
              "justification": "This can lead to increased coupling between the methods, making it difficult to change one without affecting the other, and potentially reducing the reusability of the code.",
              "impact": "Increased coupling between classes, reduced maintainability, and potential for bugs.",
              "refactoring": "Consider extracting common logic into a separate method or class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/scores/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "getScoresBySpan method",
              "justification": "The method is too long and complex, making it difficult to understand and maintain.",
              "impact": "It can lead to increased complexity, reduced readability, and potential bugs if not refactored.",
              "refactoring": "Consider breaking down the method into smaller, more manageable functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/inmemory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/storage/domains/traces/base.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The class `OpenAPIToolset` has many methods and properties that are not used or are redundant.",
              "justification": "The class contains methods like `getApiClient`, `toolSchemas`, `toolDocumentations`, and `baseClient` which are not used or are redundant. These methods can be removed to reduce the size and complexity of the class.",
              "impact": "This can lead to increased maintenance costs, reduced performance, and decreased readability.",
              "refactoring": "Remove the unused methods and properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields or Methods",
              "category": "Dispensables",
              "snippet": "The `OpenAPIToolset` class does not have any fields or methods.",
              "justification": "This class is an abstract base class that does not provide any functionality. It only serves as a placeholder for other classes to extend.",
              "impact": "Reduces the complexity of the codebase and can be removed without affecting the overall functionality.",
              "refactoring": "Remove the class and replace it with an interface or abstract class if necessary."
            },
            {
              "name": "Inconsistent Naming",
              "category": "Object-Orientation Abusers",
              "snippet": "The class name `OpenAPIToolset` is inconsistent with the file name `openapi-toolset.js`.",
              "justification": "Consistent naming conventions help improve readability and maintainability. This inconsistency could lead to confusion and errors.",
              "impact": "Improves code readability and reduces potential for errors.",
              "refactoring": "Rename the class to match the file name."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/openapi-toolset.mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/integration/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/integration/integration.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields or Methods",
              "category": "Dispensables",
              "snippet": "The `Integration` class does not have any fields or methods.",
              "justification": "The class is empty and does not perform any specific functionality.",
              "impact": "Reduces the complexity of the codebase and can be removed without affecting the overall functionality.",
              "refactoring": "Remove the `Integration` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './integration.warning';\nexport * from './openapi-toolset.warning';\nexport * from './swagger-ui.warning';\nexport * from './swagger-ui-standalone.warning';\nexport * from './swagger-ui-standalone-pro.warning';\nexport * from './swagger-ui-standalone-pro-v3.warning';\nexport * from './swagger-ui-standalone-pro-v4.warning';",
              "justification": "Esta prática exporta todos os módulos de uma pasta, tornando o código mais difícil de entender e manter. Em vez disso, é recomendável exportar apenas os módulos que são realmente necessários.",
              "impact": "Aumenta a complexidade do código, tornando-o mais difícil de manter e testar. Também pode aumentar o tempo de compilação e o tamanho do bundle final.",
              "refactoring": "Organizar as exportações de forma mais específica, exportando apenas os módulos que são realmente utilizados."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/integration/integration.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/tts/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `traced` method is defined but not used anywhere in the class.",
              "justification": "The `traced` method is defined but not utilized, which can lead to unused code and potential maintenance issues.",
              "impact": "Reduces code readability and maintainability by introducing unnecessary functionality.",
              "refactoring": "Remove the `traced` method or use it within the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/tts/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The class `MastaTTS` extends `BaseMastraTTS` but does not override any methods.",
              "justification": "Extending a base class without overriding methods is considered an object-orientation abuser because it does not provide any additional functionality or behavior.",
              "impact": "This can lead to confusion and potential bugs if the base class is modified in the future.",
              "refactoring": "Consider adding at least one method to `MastaTTS` that overrides a method from `BaseMastraTTS`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `logger.warn` statement is used to log a warning message, but it is not used anywhere else in the code.",
              "justification": "Logging warnings that are not used anywhere else is considered dispensable because they do not contribute to the functionality of the code.",
              "impact": "This can lead to clutter and unnecessary logging, which can make the code harder to read and maintain.",
              "refactoring": "Remove the `logger.warn` statement if it is not needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/multi-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `MultiLogger` class has many methods that delegate to its `loggers` array.",
              "justification": "Each method in `MultiLogger` is essentially a loop over the `loggers` array and calls the corresponding method on each logger. This can lead to code duplication and make it harder to maintain.",
              "impact": "Increased complexity, potential for bugs if not properly tested, and reduced readability.",
              "refactoring": "Consider creating a utility function or using a library like `lodash`'s `_.forEach` to handle the iteration."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `getLogs` and `getLogsByRunId` methods are similar in structure and functionality.",
              "justification": "Both methods iterate over the `loggers` array and call the same method on each logger. They also have similar parameters and logic, which suggests they could be combined into a single method.",
              "impact": "Reduces code duplication, simplifies maintenance, and improves readability.",
              "refactoring": "Combine the `getLogs` and `getLogsByRunId` methods into a single method that takes a common set of parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/default-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `ConsoleLogger` class has many methods that are not used or are redundant.",
              "justification": "The `ConsoleLogger` class has methods like `debug`, `info`, `warn`, and `error` that are not used in the implementation. Additionally, the `getLogs` and `getLogsByRunId` methods are also not used.",
              "impact": "This can lead to unnecessary code and make the class harder to maintain.",
              "refactoring": "Remove the unused methods and refactor the class to only include the necessary methods."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/constants.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Constants and Types definitions",
              "justification": "The constants and types are defined in a single place, which can lead to bloating if the number of constants or types grows significantly.",
              "impact": "Increased complexity and potential for errors if the number of constants or types increases.",
              "refactoring": "Consider breaking down the constants and types into smaller, more manageable groups."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "MastraLogger#trackException",
              "justification": "The method is too long and complex, making it difficult to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Split the method into smaller, more manageable functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "MastraLogger#getLogs",
              "justification": "The method takes a large number of parameters, which can make it difficult to read and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Refactor the method to use named parameters or a separate object for parameters."
            },
            {
              "name": "Long Parameter List",
              "category": "Change Preventers",
              "snippet": "MastraLogger#getLogsByRunId",
              "justification": "The method takes a large number of parameters, which can make it difficult to read and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Refactor the method to use named parameters or a separate object for parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/noop-logger.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Dispensable",
              "category": "Dispensables",
              "snippet": "noopLogger",
              "justification": "O objeto `noopLogger` não realiza nenhuma operação útil e pode ser removido sem impactar a funcionalidade do sistema.",
              "impact": "Redução da complexidade do código, melhorias na legibilidade e manutenibilidade.",
              "refactoring": "Remover o objeto `noopLogger`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/transport.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Multiple methods with similar logic in the same class",
              "justification": "The `LoggerTransport` class has two methods (`getLogs` and `getLogsByRunId`) that perform similar operations but with different parameters. This duplication increases the complexity and maintenance overhead.",
              "impact": "Increased code size, potential for errors due to duplicated logic, and difficulty in maintaining and testing the code.",
              "refactoring": "Combine the two methods into a single method that accepts a parameter specifying whether to filter by run ID."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Static method `createCustomTransport` that does not add value to the class",
              "justification": "The `createCustomTransport` method is static and does not modify the behavior of the `LoggerTransport` class. It simply returns a modified version of the input stream. This method does not provide any additional functionality and can be removed without affecting the class's behavior.",
              "impact": "Reduces the class's complexity and makes it easier to understand and maintain.",
              "refactoring": "Remove the `createCustomTransport` method."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/logger/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/eval/types.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `EvaluationResult` interface extends `MetricResult` and includes an `output` property.",
              "justification": "Methods should be kept short to improve readability and maintainability. The `EvaluationResult` interface is extending `MetricResult`, which could lead to a long method if the `output` property is used extensively.",
              "impact": "This can make the code harder to understand and maintain, as it may require more time to read and comprehend the method's purpose.",
              "refactoring": "Consider breaking down the `EvaluationResult` interface into smaller, more focused interfaces or methods."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `EvaluationResult` interface includes an `output` property, which might indicate that the `output` logic is being moved towards the `EvaluationResult` class.",
              "justification": "Feature Envy occurs when a method or attribute in one class references data or methods of another class, indicating that the first class might not belong there. In this case, the `output` logic might be better suited to a separate class or utility function.",
              "impact": "This can lead to a class with too many responsibilities, making it harder to maintain and test.",
              "refactoring": "Consider extracting the `output` logic into a separate class or utility function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/evaluation.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `evaluate` function is too long and contains multiple responsibilities.",
              "justification": "The function performs several tasks including measuring a metric, executing hooks, and returning the result. This violates the Single Responsibility Principle.",
              "impact": "Increased complexity, harder to maintain, and potential for bugs if not properly tested.",
              "refactoring": "Split the function into smaller, more focused functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/metric.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "MetricResult interface and Metric abstract class",
              "justification": "Both the MetricResult interface and the Metric abstract class are large and contain many properties. This can lead to bloated code and make it difficult to maintain.",
              "impact": "The large size of these classes can increase the complexity of the codebase, making it harder to understand and modify. It also increases the risk of introducing bugs due to the large number of properties.",
              "refactoring": "Consider breaking down the MetricResult interface into smaller interfaces or using a more modular design."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "Metric abstract class",
              "justification": "The Metric abstract class is not properly encapsulated. It exposes too many details about its implementation, which can lead to tight coupling between the Metric class and its subclasses.",
              "impact": "This can make it difficult to change the implementation of the Metric class without affecting its subclasses. It also makes it harder to test the Metric class in isolation.",
              "refactoring": "Consider using an interface or abstract class to define the contract for the Metric class, and then implement the contract in the subclasses."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/eval/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/agent.types.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Deprecated Property",
              "category": "Change Preventers",
              "snippet": "Deprecated properties: `resourceId`, `threadId`",
              "justification": "The use of deprecated properties can lead to confusion and potential bugs when updating the code in the future.",
              "impact": "Confusion and potential bugs when updating the code in the future.",
              "refactoring": "Replace deprecated properties with the new properties and update the code to use the new properties."
            },
            {
              "name": "Deprecated Property",
              "category": "Change Preventers",
              "snippet": "Deprecated property: `format`",
              "justification": "The use of deprecated properties can lead to confusion and potential bugs when updating the code in the future.",
              "impact": "Confusion and potential bugs when updating the code in the future.",
              "refactoring": "Replace deprecated property with the new properties and update the code to use the new properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/agent.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './input-processor';\nexport { TripWire } from './trip-wire';\nexport { MessageList, convertMessages } from './message-list';\nexport type { OutputFormat } from './message-list';\nexport * from './types';\nexport * from './agent';\nexport * from './utils';\n\nexport type {\n  AgentExecutionOptions,\n  InnerAgentExecutionOptions,\n  MultiPrimitiveExecutionOptions,\n  DeprecatedOutputOptions,\n} from './agent.types';\n\nexport type { MastraLanguageModel } from '../llm/model/shared.types';",
              "justification": "Exporting all modules using `export *` can lead to unnecessary complexity and make it harder to understand the module structure. It also increases the risk of name collisions if multiple modules export the same names.",
              "impact": "Reduces maintainability by making it harder to track dependencies and manage changes. Increases the risk of bugs due to name collisions.",
              "refactoring": "Consider organizing the exports into logical groups or using named exports where appropriate."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `tryGenerateWithJsonFallback` and `tryStreamWithJsonFallback` have a similar structure with only minor differences.",
              "justification": "Both functions perform the same task but with different types and parameters. This repetition can lead to code duplication and make it harder to maintain.",
              "impact": "Increased complexity, potential for errors due to duplicated logic, and difficulty in updating or extending the functionality.",
              "refactoring": "Extract a common function that handles the core logic and then call it from both `tryGenerateWithJsonFallback` and `tryStreamWithJsonFallback`. Use function overloading or generics to handle different types and parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Deprecated Class",
              "category": "Dispensables",
              "snippet": "export class Agent",
              "justification": "The class is marked as deprecated and should be replaced with the recommended import path.",
              "impact": "Reduces maintainability by encouraging the use of the correct import path.",
              "refactoring": "Replace the import path with '@mastra/core/agent'."
            },
            {
              "name": "Class Without Constructor",
              "category": "Bloaters",
              "snippet": "export class Agent",
              "justification": "The class does not have a constructor, which can lead to unexpected behavior if the class is extended or used in other contexts.",
              "impact": "Increases complexity and potential for bugs.",
              "refactoring": "Add a constructor to the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/test-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `getMessages` method is excessively long and complex.",
              "justification": "The method handles multiple conditions and formats, making it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the `getMessages` method into smaller, more focused functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `getMessages` method has a long list of parameters.",
              "justification": "Having many parameters can make the method harder to understand and use, leading to errors and decreased maintainability.",
              "impact": "Reduced readability, increased cognitive load, and potential for bugs due to the large number of parameters.",
              "refactoring": "Consider using an object or interface to group related parameters."
            },
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `saveMessages` method is excessively long and complex.",
              "justification": "The method handles multiple conditions and formats, making it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the `saveMessages` method into smaller, more focused functions."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `saveMessages` method has a long list of parameters.",
              "justification": "Having many parameters can make the method harder to understand and use, leading to errors and decreased maintainability.",
              "impact": "Reduced readability, increased cognitive load, and potential for bugs due to the large number of parameters.",
              "refactoring": "Consider using an object or interface to group related parameters."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/trip-wire.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/save-queue/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/convert-messages.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `to` method in the `MessageConverter` class is excessively long and performs multiple conversions.",
              "justification": "The method contains multiple conditional branches that handle different output formats, making it difficult to maintain and extend.",
              "impact": "This can lead to increased complexity, reduced readability, and potential bugs if changes are made to the method.",
              "refactoring": "Consider breaking down the `to` method into smaller, more focused methods for each output format."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `convertMessages` function uses the `MessageConverter` class to perform its conversion logic.",
              "justification": "This violates the Single Responsibility Principle, as the `convertMessages` function is now responsible for both input handling and output conversion, which should be separated.",
              "impact": "This can make the code harder to understand and maintain, as changes to one part of the code may affect the other.",
              "refactoring": "Extract the conversion logic into a separate method within the `MessageConverter` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v4-v5/ui-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v4-v5/core-model-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v5/tool.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "function getToolName(type: string | { type: string }): string",
              "justification": "The function `getToolName` is excessively long, containing multiple conditional checks and string manipulations. This makes it difficult to read and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of lines and nested conditions.",
              "refactoring": "Consider breaking down the function into smaller, more focused methods or using helper functions to improve code organization."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "function getToolName(type: string | { type: string }): string",
              "justification": "The function `getToolName` is accessing properties of an object (`type`) that is not directly related to its primary responsibility (extracting a tool name). This violates the Single Responsibility Principle.",
              "impact": "Reduced cohesion between the function and the object, making it harder to understand and maintain.",
              "refactoring": "Extract the logic related to handling objects with a `type` property into a separate method or function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/utils/ai-v5/gemini-compatibility.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/download-assets.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/image-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `createDataUri` function includes unnecessary logic for handling binary data.",
              "justification": "The function converts binary data to base64 and then checks if it starts with 'data:', which is redundant since the conversion already results in a data URI. This adds complexity without providing any additional value.",
              "impact": "Reduces readability and maintainability by introducing unnecessary code.",
              "refactoring": "Remove the check for 'data:' in the `createDataUri` function."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `parseDataUri` function does not handle cases where the MIME type is missing or invalid.",
              "justification": "The function assumes that the MIME type is always present and valid, which may not be the case in all scenarios. This makes the function less robust and error-prone.",
              "impact": "Increases the risk of errors and reduces the reliability of the function.",
              "refactoring": "Add error handling for cases where the MIME type is missing or invalid."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/invalid-content-error.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/data-content.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `convertDataContentToBase64String` function has a large number of conditional checks and conversions.",
              "justification": "The function performs multiple operations (conversion to Uint8Array, conversion to base64) based on the type of input, which can lead to bloated code.",
              "impact": "This can make the function harder to read and maintain, as well as potentially increase execution time due to repeated conversions.",
              "refactoring": "Consider creating separate helper functions for each conversion step to improve readability and maintainability."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/convert-file.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/attachments-to-parts.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/message-list/prompt/convert-to-mastra-v1.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/__tests__/mock-model.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/schema.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/stream-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/prepare-memory-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/prepare-tools-step.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `createPrepareToolsStep` is quite large and contains multiple complex operations.",
              "justification": "The function performs several tasks such as logging, converting tools, and returning results. This makes it difficult to understand and maintain.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The variable `toolEnhancements` is not used anywhere in the function.",
              "justification": "The variable is initialized but never referenced or modified, making it unnecessary.",
              "impact": "Reduces code size and improves performance.",
              "refactoring": "Remove the unused variable `toolEnhancements`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/workflows/prepare-stream/map-results-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/pii-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The class PIIDetectorInputProcessor is implementing an old InputProcessor interface and is deprecated.",
              "justification": "The class is not used anymore and can be removed to reduce the codebase size.",
              "impact": "Reduces the codebase size, improves maintainability, and reduces the risk of errors.",
              "refactoring": "Remove the class PIIDetectorInputProcessor and use PIIDetector directly."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The type definitions for PIIDetectorOptions, PIIDetectionResult, PIICategories, PIICategoryScores, and PIIDetection are exported but not used anywhere in the code.",
              "justification": "These types are not used and can be removed to reduce the codebase size.",
              "impact": "Reduces the codebase size, improves maintainability, and reduces the risk of errors.",
              "refactoring": "Remove the type definitions for PIIDetectorOptions, PIIDetectionResult, PIICategories, PIICategoryScores, and PIIDetection."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/prompt-injection-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `PromptInjectionDetectorInputProcessor` extends `InputProcessor` and includes a private property `processor` of type `PromptInjectionDetector`. This property is initialized in the constructor with an instance of `PromptInjectionDetector`.",
              "justification": "The class has a private property that holds an instance of another class, which can lead to increased complexity and potential for bugs if not managed properly.",
              "impact": "This can make the class harder to understand and maintain, as it introduces a dependency on another class. It also increases the memory footprint of the class.",
              "refactoring": "Consider extracting the `PromptInjectionDetector` logic into a separate class or module to reduce coupling and improve modularity."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `PromptInjectionDetectorInputProcessor` class does not implement any methods that are specific to the `InputProcessor` interface. Instead, it simply forwards the `process` method to the `processor` instance.",
              "justification": "The class does not add any new functionality or behavior that is not already present in the `PromptInjectionDetector` class. It only serves as a wrapper and does not provide any additional value.",
              "impact": "This can make the class redundant and potentially confusing, as it does not add any new features or responsibilities.",
              "refactoring": "Consider removing the `PromptInjectionDetectorInputProcessor` class and using the `PromptInjectionDetector` class directly instead."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/language-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `LanguageDetectorInputProcessor` extends `InputProcessor` and includes a private property `processor` of type `LanguageDetector`. This property is initialized in the constructor with an instance of `LanguageDetector` created with the provided `options`.",
              "justification": "The class contains unnecessary properties and methods that are not directly related to its primary functionality. The `processor` property is not used within the class, making it redundant.",
              "impact": "This can lead to increased memory usage and potential performance issues due to the unnecessary storage of the `processor` object. It also makes the class harder to understand and maintain.",
              "refactoring": "Remove the `processor` property and use the `LanguageDetector` directly within the class."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `LanguageDetectorInputProcessor` class does not implement any methods that are not required by the `InputProcessor` interface. The `process` method simply calls the `processInput` method of the `processor` object.",
              "justification": "The class does not add any value to the `InputProcessor` interface beyond what is already provided by the `LanguageDetector` class. The `process` method can be removed without affecting the functionality of the class.",
              "impact": "Removing the `process` method can simplify the class and reduce the risk of introducing bugs or errors.",
              "refactoring": "Remove the `process` method and call the `processInput` method directly on the `processor` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/moderation.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `ModerationInputProcessor` class does not implement any methods or properties that are required by the `InputProcessor` interface, making it redundant and potentially unnecessary.",
              "justification": "The class only wraps the `ModerationProcessor` and does not add any additional functionality, so it can be removed without affecting the overall functionality.",
              "impact": "This can lead to reduced code size, decreased complexity, and potential maintenance issues.",
              "refactoring": "Remove the `ModerationInputProcessor` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/agent/input-processor/processors/unicode-normalizer.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Class `UnicodeNormalizerInputProcessor`",
              "justification": "The class contains a private property `processor` that is not used anywhere in the class. This property is likely a leftover from an older version of the code.",
              "impact": "This can lead to unnecessary memory usage and potential bugs if the property is accidentally modified or accessed.",
              "refactoring": "Remove the unused private property `processor`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Type alias `UnicodeNormalizerOptions`",
              "justification": "The type alias `UnicodeNormalizerOptions` is not used anywhere in the code. It is likely a leftover from an older version of the code.",
              "impact": "This can lead to unnecessary complexity and potential bugs if the type alias is accidentally modified or accessed.",
              "refactoring": "Remove the unused type alias `UnicodeNormalizerOptions`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/relevance-score-provider.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "createSimilarityPrompt function",
              "justification": "The function is overly complex with unnecessary details. It includes a prompt template that could be extracted into a separate constant or configuration object.",
              "impact": "Increases code complexity, makes it harder to maintain, and may lead to duplication if the prompt is reused elsewhere.",
              "refactoring": "Extract the prompt template into a separate constant or configuration object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/relevance/cohere/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `getRelevanceScore` method is too long and complex.",
              "justification": "The method performs multiple tasks including API request, error handling, and data parsing, which makes it difficult to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Split the method into smaller, more focused functions."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `getRelevanceScore` method accesses properties of the `CohereRelevanceScorer` instance.",
              "justification": "The method is tightly coupled with the instance's state, which violates the Single Responsibility Principle and can lead to tight coupling between classes.",
              "impact": "Reduced cohesion, increased coupling, and potential for bugs.",
              "refactoring": "Extract the logic related to API requests and error handling into a separate utility function."
            },
            {
              "name": "Data Clumps",
              "category": "Bloaters",
              "snippet": "The `CohereRerankingResponse` interface includes fields that are not used in the implementation.",
              "justification": "The interface contains fields that are not utilized in the implementation, leading to unnecessary complexity and potential for errors.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Remove unused fields from the interface."
            },
            {
              "name": "Primitive Obsession",
              "category": "Bloaters",
              "snippet": "The `CohereRerankingResponse` interface uses primitive types (`string`, `number`) instead of objects or enums.",
              "justification": "Using primitive types can lead to errors and make the code harder to maintain and understand.",
              "impact": "Increased complexity, potential for bugs, and reduced readability.",
              "refactoring": "Replace primitive types with objects or enums."
            },
            {
              "name": "Inappropriate Intimacy",
              "category": "Couplers",
              "snippet": "The `CohereRelevanceScorer` class has a dependency on the `RelevanceScoreProvider` interface.",
              "justification": "The class is tightly coupled with an interface that it does not need to implement, which can lead to unnecessary dependencies and potential for bugs.",
              "impact": "Increased complexity, potential for bugs, and reduced flexibility.",
              "refactoring": "Remove the dependency on the `RelevanceScoreProvider` interface."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/relevance/mastra-agent/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `getRelevanceScore` method is too long and complex.",
              "justification": "The method contains multiple steps that could be separated into smaller methods for better readability and maintainability.",
              "impact": "Increased complexity, potential for bugs, and reduced testability.",
              "refactoring": "Split the `getRelevanceScore` method into smaller, more focused methods."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `getRelevanceScore` method accesses the `agent`'s properties directly.",
              "justification": "The method should be encapsulated within the `MastraAgentRelevanceScorer` class to improve encapsulation and reduce coupling.",
              "impact": "Reduced cohesion, potential for tight coupling, and increased difficulty in testing.",
              "refactoring": "Move the `agent` property and its methods into the `MastraAgentRelevanceScorer` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/test-utils/llm-mock.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `createMockModel` has a large number of parameters and uses multiple imports.",
              "justification": "The function takes many parameters, which can lead to long parameter lists and make the function harder to read. Additionally, it uses multiple imports, which can increase the size of the module and make it harder to maintain.",
              "impact": "This can make the function harder to understand and maintain, as well as increase the risk of errors due to incorrect parameter values or missing imports.",
              "refactoring": "Consider breaking down the function into smaller functions or using a configuration object to pass in all the necessary parameters."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The variable `finalText` is assigned the value of `text` if `objectGenerationMode` is not 'json'. This variable is not used anywhere else in the function.",
              "justification": "The variable `finalText` is only used once in the function, and its value is determined by the `objectGenerationMode` parameter. Since it is not used elsewhere, it can be removed to simplify the function.",
              "impact": "This can make the function easier to understand and maintain, as well as reduce the risk of errors due to unused variables.",
              "refactoring": "Remove the variable `finalText` and directly use the value of `text` in the function."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/loop.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/mockTracer.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `MockSpan` class has a long method `addEvent` that handles multiple cases for adding events to the span.",
              "justification": "The method is too complex and long, making it difficult to read and maintain. It also violates the Single Responsibility Principle.",
              "impact": "This can lead to increased complexity in the codebase, making it harder to understand and modify over time.",
              "refactoring": "Consider breaking down the `addEvent` method into smaller, more focused methods."
            },
            {
              "name": "Long Parameter List",
              "category": "Bloaters",
              "snippet": "The `startActiveSpan` method has a long parameter list with multiple optional parameters.",
              "justification": "Having many parameters in a single method call can make the method signature complex and hard to read. It also makes the method harder to use and understand.",
              "impact": "This can lead to increased complexity in the codebase, making it harder to understand and modify over time.",
              "refactoring": "Consider breaking down the `startActiveSpan` method into smaller, more focused methods or using default values for optional parameters."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `MockSpan` class has methods that are not related to its primary responsibility of representing a span.",
              "justification": "Methods like `addLink`, `addLinks`, `setStatus`, `updateName`, `end`, `isRecording`, and `recordException` are not directly related to the `MockSpan` class's primary responsibility of representing a span. They are more related to the `Span` interface.",
              "impact": "This can lead to increased coupling between classes and make the codebase harder to understand and maintain.",
              "refactoring": "Consider extracting these methods into separate classes or interfaces that are more closely related to their responsibilities."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/generateText.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/streamObject.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/tools.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/textStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/toUIMessageStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/mock-server-response.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/fullStream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The code contains unnecessary imports and unused variables.",
              "justification": "Imports like `@ai-sdk/provider-utils-v5`, `convertAsyncIterableToArray`, `tool`, `convertArrayToReadableStream`, `mockValues`, `mockId`, `describe`, `expect`, `it`, `vi`, `z`, `MessageList`, `loop`, `createMessageListWithUserMessage`, `createTestModels`, `defaultSettings`, `mockDate`, `modelWithFiles`, `modelWithReasoning`, `modelWithSources`, `testUsage`, `testUsage2`, `fullStreamTests`, `MastraLanguageModelV2Mock` are not used anywhere in the code. These imports and variables add unnecessary bloat to the codebase.",
              "impact": "Increased code size, potential for bugs due to unused imports, and decreased readability.",
              "refactoring": "Remove unused imports and variables."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/options.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/resultObject.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/MastraLanguageModelV2Mock.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/test-utils/telemetry.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/schema.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/stream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/run-state.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/tool-call-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/llm-mapping-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-execution/llm-execution-step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/workflows/agentic-loop/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/telemetry/noop.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "noopSpanContext and noopSpan are simple objects with minimal functionality.",
              "justification": "These objects are used to simulate the behavior of real spans and contexts, but they lack any meaningful methods or properties. This can lead to confusion and potential misuse in larger systems.",
              "impact": "The use of these simple objects can make the code harder to understand and maintain, as it may not be immediately clear what their purpose is or how they interact with other parts of the system.",
              "refactoring": "Consider creating more complex classes or interfaces for span and context objects, with meaningful methods and properties."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/loop/telemetry/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/loop/network/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/MastraAgentNetworkStream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/RunOutput.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/MastraWorkflowStream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `#usageCount` object is used to track token usage, which can grow large over time and lead to performance issues.",
              "justification": "Tracking token usage in a large object can consume memory and processing power, especially if the workflow runs for extended periods.",
              "impact": "High memory usage and potential performance degradation due to the accumulation of token usage data.",
              "refactoring": "Consider using a more efficient data structure or a separate class to manage token usage."
            },
            {
              "name": "Change Preventers",
              "category": "Change Preventers",
              "snippet": "The `#streamPromise` object is used to manage the lifecycle of the stream, but it is not used to handle errors or exceptions that may occur during the stream creation or reading process.",
              "justification": "The `#streamPromise` object is not designed to handle errors or exceptions, which can lead to unexpected behavior or crashes if an error occurs.",
              "impact": "Potential loss of data or application instability due to unhandled errors or exceptions.",
              "refactoring": "Consider adding error handling and exception management to the `#streamPromise` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/file.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Lazy Evaluation",
              "category": "Change Preventers",
              "snippet": "The `base64` and `uint8Array` properties are implemented using lazy evaluation.",
              "justification": "Lazy evaluation can lead to performance issues if not properly managed, especially in scenarios where these properties are accessed frequently.",
              "impact": "Increased memory usage due to caching, potential performance degradation if accessed multiple times without proper management.",
              "refactoring": "Consider using a getter with a boolean flag to control whether the conversion should be performed."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The `DefaultGeneratedFile` class uses inheritance to extend functionality, but it does not add any new behavior or properties.",
              "justification": "Inheritance should be used judiciously to avoid creating overly complex classes that do not add value.",
              "impact": "Increased complexity and potential for confusion, as the class does not provide any additional functionality beyond what is already available in the base class.",
              "refactoring": "Consider using composition instead of inheritance to achieve the same functionality."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/output.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/output-helpers.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "Constructor with many parameters",
              "justification": "The constructor takes multiple parameters, which can lead to long and complex constructors. This can make the class harder to read and maintain.",
              "impact": "Increased complexity, reduced readability, potential for errors due to incorrect parameter values.",
              "refactoring": "Consider using a builder pattern or a factory method to create instances of the class."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "Unused properties in the class",
              "justification": "The `request`, `response`, and `providerMetadata` properties are not used anywhere in the class. These properties can be removed to simplify the class.",
              "impact": "Reduced complexity, improved readability, potential for bugs if these properties are accidentally used.",
              "refactoring": "Remove unused properties from the class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/execute.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `ReadableStream` is being used without proper error handling and the `@ts-ignore` comment is present.",
              "justification": "Using `ReadableStream` without proper error handling can lead to runtime errors. The `@ts-ignore` comment is a workaround for TypeScript's strict type checking, which can be risky in production environments.",
              "impact": "This can make the code less robust and harder to maintain.",
              "refactoring": "Consider adding try-catch blocks around the `for await` loop to handle potential errors gracefully."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `controller.enqueue(transformedChunk);` line is redundant if `transformedChunk` is always truthy.",
              "justification": "If `transformedChunk` is always truthy, the `enqueue` method will always be called, which can be considered redundant.",
              "impact": "This can make the code less readable and potentially unnecessary.",
              "refactoring": "Remove the redundant `enqueue` call if `transformedChunk` is always truthy."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/transform.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `convertFullStreamChunkToMastra` function is excessively long and performs multiple tasks.",
              "justification": "The function handles various types of stream parts and constructs different chunk types based on the input. This makes it difficult to maintain and understand.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to the large number of conditional checks.",
              "refactoring": "Consider breaking down the function into smaller, more focused methods that handle each type of stream part separately."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/test-utils.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `createTestModel` function has a large number of parameters and uses a lot of imports.",
              "justification": "The function takes multiple parameters and uses several external libraries, which can lead to bloated code and make it harder to maintain.",
              "impact": "Increased complexity, potential for errors, and reduced readability.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions or using a builder pattern to reduce the number of parameters."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `testUsage` object is not used anywhere in the code.",
              "justification": "The object contains only static values that are not referenced or modified within the function. It can be removed without affecting the functionality.",
              "impact": "Reduces code size and complexity, making the code easier to understand and maintain.",
              "refactoring": "Remove the `testUsage` object."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/prepare-tools.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/ui-message.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/media.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `stripID3` function is used in multiple places and has a similar implementation.",
              "justification": "The function is duplicated across different parts of the codebase, which increases complexity and maintenance overhead.",
              "impact": "The duplication can lead to inconsistencies and errors if the implementation changes in one place but not the others.",
              "refactoring": "Extract the `stripID3` function into a separate module or utility file."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/consume-stream.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/delayed-promise.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Lazy Initialization",
              "category": "Dispensables",
              "snippet": "The `DelayedPromise` class uses lazy initialization for its `_promise` property.",
              "justification": "Lazy initialization can lead to unnecessary object creation and can be replaced with a simple getter that returns a promise.",
              "impact": "Reduces memory usage and improves performance by avoiding unnecessary object creation.",
              "refactoring": "Replace the lazy initialization with a simple getter that returns a promise."
            },
            {
              "name": "Unnecessary Property",
              "category": "Dispensables",
              "snippet": "The `DelayedPromise` class has an unnecessary property `status` that is not used anywhere in the class.",
              "justification": "The `status` property can be removed as it does not contribute to the functionality of the class.",
              "impact": "Reduces memory usage and improves performance by removing unnecessary properties.",
              "refactoring": "Remove the `status` property."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/validation.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/content.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v5/compat/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './content';\nexport * from './media';\nexport * from './ui-message';\nexport * from './validation';\nexport * from './delayed-promise';\nexport * from './prepare-tools';\nexport * from './consume-stream';\nexport * from './utils';",
              "justification": "Exporting all modules at once can lead to unnecessary complexity and make it harder to manage dependencies. It also reduces the ability to selectively import only what is needed.",
              "impact": "Increased complexity, reduced maintainability, and potential for performance issues due to unnecessary imports.",
              "refactoring": "Consider using named exports or importing specific modules as needed."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v4/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `for await` loop is used to iterate over the `stream`, which can lead to performance issues if the stream is large.",
              "justification": "The `for await` loop is synchronous and can block the event loop, leading to performance degradation when dealing with large streams.",
              "impact": "High impact on performance, especially in scenarios where the stream is large or the application is under heavy load.",
              "refactoring": "Consider using an asynchronous iterator or a generator to handle the stream more efficiently."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `controller.enqueue(transformedChunk);` line is redundant if `transformedChunk` is `null` or `undefined`.",
              "justification": "If `transformedChunk` is not valid, it should be skipped or handled appropriately without enqueuing it.",
              "impact": "Low impact on functionality but can lead to unnecessary processing and potential bugs.",
              "refactoring": "Add a check to ensure `transformedChunk` is valid before enqueuing it."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/aisdk/v4/transform.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Switch Statement",
              "category": "Change Preventers",
              "snippet": "The function uses a switch statement to handle different types of input values.",
              "justification": "Switch statements can lead to tight coupling and make it difficult to add new cases without modifying the existing code. This can prevent changes from being made in the future.",
              "impact": "Increased complexity, difficulty in adding new features, and potential for bugs if not properly managed.",
              "refactoring": "Consider using a map or object to handle different types of input values, which can make it easier to add new cases and improve maintainability."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/schema.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The code contains multiple imports for different versions of the same library ('zod/v3' and 'zod/v4').",
              "justification": "Multiple imports for the same library can lead to confusion and potential issues with version compatibility.",
              "impact": "Increased complexity, potential for errors due to version mismatches, and reduced maintainability.",
              "refactoring": "Combine the imports into a single import statement for the latest version of 'zod'."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `asJsonSchema` function returns `undefined` when the input `schema` is `undefined`. This can be simplified by returning `undefined` directly without checking the condition.",
              "justification": "Returning `undefined` directly simplifies the function and avoids unnecessary checks.",
              "impact": "Reduced complexity and improved readability.",
              "refactoring": "Remove the condition and return `undefined` directly."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The `getTransformedSchema` function returns `undefined` when the input `schema` is `undefined`. This can be simplified by returning `undefined` directly without checking the condition.",
              "justification": "Returning `undefined` directly simplifies the function and avoids unnecessary checks.",
              "impact": "Reduced complexity and improved readability.",
              "refactoring": "Remove the condition and return `undefined` directly."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/output.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/base/consume-stream.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "O método `consumeStream` tem uma lógica simples que pode ser simplificada.",
              "justification": "O método não faz uso de nenhuma estrutura de dados complexa ou de funções auxiliares. A lógica pode ser reduzida para apenas ler o stream até que ele termine.",
              "impact": "Reduzirá a complexidade do código, melhorando a legibilidade e a manutenibilidade.",
              "refactoring": "Remover a lógica de leitura do stream dentro do método `consumeStream`."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "O método `consumeStream` não usa a variável `onError`.",
              "justification": "A variável `onError` não é utilizada dentro do método, tornando-a dispensável.",
              "impact": "Removerá a variável desnecessária, melhorando a performance e a legibilidade do código.",
              "refactoring": "Remover a variável `onError` do método `consumeStream`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/input.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `initialize` method creates a new `ReadableStream` and starts it asynchronously.",
              "justification": "Creating a new `ReadableStream` and starting it asynchronously can lead to bloated code as it introduces unnecessary complexity and potential for errors.",
              "impact": "This can make the code harder to understand and maintain, as well as potentially increase the risk of bugs due to asynchronous operations.",
              "refactoring": "Consider using a more synchronous approach or refactoring the code to avoid creating a new `ReadableStream` and starting it asynchronously."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/stream/base/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/stream/base/output-format-handlers.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/stream/base/base.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `consumeStream` method in the `MastaBaseStream` interface is too long and complex.",
              "justification": "Methods should be kept short and focused to improve readability and maintainability. The `consumeStream` method contains multiple parameters and logic that could be extracted into smaller methods or functions.",
              "impact": "This can lead to increased complexity, reduced readability, and potential bugs if not properly managed.",
              "refactoring": "Extract the logic related to handling options into separate methods or functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/server/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/auth.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/composite-auth.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `CompositeAuth` class has multiple methods that delegate authentication and authorization to its providers.",
              "justification": "This design pattern can lead to bloated code as it spreads the logic across multiple methods. Each method is responsible for calling a provider's method, which can make the code harder to understand and maintain.",
              "impact": "Increased complexity, reduced readability, and potential for errors if any provider fails to authenticate or authorize.",
              "refactoring": "Consider using a single method that iterates over the providers and returns the result of the first successful authentication or authorization."
            },
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "The `CompositeAuth` class does not encapsulate its behavior well. It relies on the providers to handle authentication and authorization, which can lead to tight coupling between the composite and its providers.",
              "justification": "This design pattern can lead to tight coupling, making it difficult to change or extend the behavior of the composite without affecting its providers. Encapsulation would help in managing the behavior more effectively.",
              "impact": "Reduced flexibility, difficulty in testing, and potential for bugs if the providers' behavior changes.",
              "refactoring": "Consider creating an interface for the providers and having the composite implement this interface. This would allow for better decoupling and easier testing."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/server/simple-auth.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/server/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The function `validateOptions` has a large number of conditional checks.",
              "justification": "The function contains multiple checks for required properties and error handling, which can lead to bloated code.",
              "impact": "This can make the function harder to read and maintain, as well as increase the risk of errors due to complex logic.",
              "refactoring": "Consider breaking down the function into smaller, more focused functions that handle each specific validation step."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/di/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Redundant Import",
              "category": "Object-Orientation Abusers",
              "snippet": "import { RuntimeContext as RuntimeContextType } from '../runtime-context';",
              "justification": "O import redundante está importando a mesma classe duas vezes com diferentes nomes. Isso pode confundir o desenvolvedor e pode levar a erros de compilação se houver conflitos entre as duas importações.",
              "impact": "Reduz a legibilidade do código e pode causar confusão para outros desenvolvedores.",
              "refactoring": "Remover uma das importações redundantes."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/memory/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/memory/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/memory/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class Without Fields",
              "category": "Dispensables",
              "snippet": "The `MastaMemory` class does not have any fields or properties.",
              "justification": "Classes without fields are typically empty and can be removed to simplify the codebase.",
              "impact": "Reduces complexity, improves readability, and reduces maintenance overhead.",
              "refactoring": "Remove the `MastaMemory` class."
            },
            {
              "name": "Empty Constructor",
              "category": "Dispensables",
              "snippet": "The `MastaMemory` class has an empty constructor.",
              "justification": "Empty constructors are often unnecessary and can be removed to simplify the class definition.",
              "impact": "Reduces complexity, improves readability, and reduces maintenance overhead.",
              "refactoring": "Remove the empty constructor."
            },
            {
              "name": "Logger Usage",
              "category": "Change Preventers",
              "snippet": "The `MastaMemory` class uses the `logger.warn` method.",
              "justification": "Using the logger for warnings can prevent changes from being made without logging them, which can lead to issues if the logger is not properly configured or disabled.",
              "impact": "Increases the risk of changes not being logged, potentially leading to bugs or security vulnerabilities.",
              "refactoring": "Replace the logger usage with a more appropriate logging mechanism or remove it if it's not necessary."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/memory/memory.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/execution-engine.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `execute` method is excessively long and complex.",
              "justification": "The method contains multiple parameters and performs various operations, making it difficult to maintain and understand.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to increased coupling between different parts of the code.",
              "refactoring": "Consider breaking down the method into smaller, more focused functions or using object-oriented design principles to improve modularity."
            },
            {
              "name": "Large Class",
              "category": "Object-Orientation Abusers",
              "snippet": "The `ExecutionEngine` class is large and contains many methods and properties.",
              "justification": "The class has a high number of responsibilities and methods, which can lead to tight coupling and make it difficult to maintain and extend.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to increased coupling between different parts of the code.",
              "refactoring": "Consider refactoring the class into smaller, more focused classes or using object-oriented design principles to improve modularity."
            },
            {
              "name": "Feature Envy",
              "category": "Object-Orientation Abusers",
              "snippet": "The `execute` method accesses properties and methods of the `RegisteredLogger` class.",
              "justification": "The method is accessing properties and methods of another class, which can lead to tight coupling and make it difficult to maintain and extend.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to increased coupling between different parts of the code.",
              "refactoring": "Consider moving the method to the `RegisteredLogger` class or using object-oriented design principles to improve modularity."
            },
            {
              "name": "Data Clumps",
              "category": "Bloaters",
              "snippet": "The `ExecutionEngineOptions` interface contains multiple related properties.",
              "justification": "The interface contains multiple related properties that are not logically grouped together, which can lead to increased complexity and reduced readability.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to increased coupling between different parts of the code.",
              "refactoring": "Consider grouping related properties into a single interface or using object-oriented design principles to improve modularity."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/workflow.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Class with too many responsibilities",
              "category": "Change Preventers",
              "snippet": "The `Workflow` class extends `BaseWorkflow` and includes additional logic in the constructor.",
              "justification": "The `Workflow` class is responsible for both workflow configuration and logging, which are separate concerns. This can lead to tight coupling and make it difficult to maintain and extend.",
              "impact": "Increased complexity, reduced maintainability, and potential for bugs if the logging logic changes.",
              "refactoring": "Extract the logging logic into a separate method or class."
            },
            {
              "name": "Redundant import",
              "category": "Dispensables",
              "snippet": "The line `import * from './index';` is redundant because it imports everything from the current module.",
              "justification": "Imports should only include what is necessary to avoid unnecessary dependencies and improve performance.",
              "impact": "Reduced code size, improved build times, and reduced risk of conflicts.",
              "refactoring": "Remove the redundant import."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/default.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/constants.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Object-Orientation Abusers",
              "category": "Object-Orientation Abusers",
              "snippet": "StreamFormatter and StreamEmitter classes are singletons.",
              "justification": "Singletons can lead to tight coupling and make it difficult to test individual components.",
              "impact": "Increased complexity in testing and maintenance.",
              "refactoring": "Consider using dependency injection or factory patterns to create instances of these classes."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "EMITTER_SYMBOL, STREAM_FORMAT_SYMBOL, and STREAM_FORMATTER_SYMBOL are symbols used for internal purposes.",
              "justification": "Symbols are typically used for internal purposes and can be replaced with more descriptive names or removed if they are not needed.",
              "impact": "Reduced cognitive load and improved code readability.",
              "refactoring": "Replace symbols with more descriptive names or remove them if they are not used."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/workflows/workflow.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/index.warning.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Export All",
              "category": "Dispensables",
              "snippet": "export * from './workflow.warning';\nexport * from './execution-engine';\nexport * from './default';\nexport * from './step';\nexport * from './types';",
              "justification": "Exporting all modules using `export *` is generally considered a code smell because it can lead to namespace pollution and make it harder to understand the dependencies between modules. It also makes it difficult to track changes and maintain the codebase.",
              "impact": "This can negatively impact the readability, maintainability, and scalability of the codebase.",
              "refactoring": "Consider organizing the exports into named exports or using a module bundler that supports tree shaking to reduce the bundle size."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/execution-engine.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `execute` method is too long and contains multiple responsibilities.",
              "justification": "The method handles both starting a workflow and resuming or time-traveling it, which are distinct operations. This makes the method complex and difficult to maintain.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to overlapping concerns.",
              "refactoring": "Split the `execute` method into two separate methods: one for starting a workflow and another for resuming or time-traveling it."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/step-executor.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/loop.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `processWorkflowLoop` and `processWorkflowForEach` functions are long and contain multiple conditional statements.",
              "justification": "Long methods can make the code difficult to read and maintain. They also increase the risk of bugs due to increased complexity.",
              "impact": "Increased complexity, reduced readability, potential for bugs, and longer development time.",
              "refactoring": "Consider breaking down these functions into smaller, more focused functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/sleep.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/evented/workflow-event-processor/parallel.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/types.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/step.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/machine.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/workflow.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/utils.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/workflows/legacy/workflow-instance.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/voice/voice.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Change Preventers",
              "snippet": "The `speak` and `listen` methods are long and complex.",
              "justification": "Both methods handle multiple cases and options, making them difficult to maintain and extend.",
              "impact": "Increased complexity, reduced readability, and potential for bugs.",
              "refactoring": "Split the methods into smaller, more focused functions."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/voice/default-voice.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The class `DefaultVoice` contains multiple methods that throw the same error, which is repeated in each method.",
              "justification": "This repetition increases the size of the class and makes it harder to maintain. It also reduces the readability and maintainability of the code.",
              "impact": "The code becomes less readable and harder to maintain, as well as increasing the risk of errors if the error message or domain changes.",
              "refactoring": "Extract the error creation logic into a separate method."
            },
            {
              "name": "Dispensables",
              "category": "Dispensables",
              "snippet": "The class `DefaultVoice` does not implement any functionality that is not provided by the base class `MastaVoice`. This means that the class can be removed without affecting the behavior of the application.",
              "justification": "Removing dispensable classes can simplify the codebase and make it easier to understand and maintain.",
              "impact": "The codebase becomes simpler and more maintainable, as well as reducing the risk of errors if the class is accidentally used.",
              "refactoring": "Remove the `DefaultVoice` class."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/voice/composite-voice.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/voice/index.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/voice/aisdk/speech.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/voice/aisdk/transcription.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Bloaters",
              "category": "Bloaters",
              "snippet": "The `experimental_transcribe` function is imported and used without being utilized in the class.",
              "justification": "The function is imported but not used, which increases the size of the codebase and makes it harder to maintain.",
              "impact": "Increased code size, potential for bugs if the function is needed later, and difficulty in understanding the code flow.",
              "refactoring": "Remove the unused import and remove the call to `experimental_transcribe`."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/voice/aisdk/index.ts": {
        "qwen_small": {
          "code_smells": []
        }
      },
      "/content/mastra/packages/core/src/processors/index.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Change Preventers",
              "category": "Change Preventers",
              "snippet": "The `Processor` interface has multiple optional methods that can be implemented in different ways, leading to potential for changes that are not easily tracked or managed.",
              "justification": "This design can make it difficult to track changes and ensure consistency across different implementations. Consider using a more explicit approach to define the behavior of processors, such as using interfaces or abstract classes.",
              "impact": "Increased complexity, potential for changes that are not easily tracked or managed, and potential for reduced maintainability.",
              "refactoring": "Consider using interfaces or abstract classes to define the behavior of processors. For example, create an abstract class with default implementations for the optional methods."
            }
          ]
        }
      },
      "/content/mastra/packages/core/src/processors/runner.ts": {
        "qwen_small": {
          "code_smells": [],
          "extraction_error": true
        }
      },
      "/content/mastra/packages/core/src/processors/processors/pii-detector.ts": {
        "qwen_small": {
          "code_smells": [
            {
              "name": "Long Method",
              "category": "Bloaters",
              "snippet": "The `detectPII` method in the `PIIDetector` class is excessively long and contains multiple logic paths.",
              "justification": "Methods should be kept short and focused on a single responsibility. This method handles various configurations, detection logic, and redaction strategies, making it difficult to maintain and understand.",
              "impact": "Increased complexity, reduced readability, and potential for bugs due to long execution times.",
              "refactoring": "Split the `detectPII` method into smaller, more focused methods."
            }
          ]
        }
      }
    }
  }
}
